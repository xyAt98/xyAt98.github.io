<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"xyat98.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Faith is a substance of things hoped for, the evidence of things not seen.">
<meta property="og:type" content="website">
<meta property="og:title" content="Liu">
<meta property="og:url" content="http://xyat98.github.io/index.html">
<meta property="og:site_name" content="Liu">
<meta property="og:description" content="Faith is a substance of things hoped for, the evidence of things not seen.">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="y-n">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://xyat98.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Liu</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Liu</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">0</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">7</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">16</span></a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>日程表</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://xyat98.github.io/2024/01/13/%E8%B0%B7%E7%B2%92/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/IMG_9443.JPG">
      <meta itemprop="name" content="y-n">
      <meta itemprop="description" content="Faith is a substance of things hoped for, the evidence of things not seen.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Liu">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/01/13/%E8%B0%B7%E7%B2%92/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-01-13 21:10:54" itemprop="dateCreated datePublished" datetime="2024-01-13T21:10:54+08:00">2024-01-13</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>工具&amp;使用</h1>
<h2 id="虚拟机">虚拟机</h2>
<h3 id="1-进入虚拟机">1. 进入虚拟机</h3>
<p>cmd(对应文件夹下)下通过vagrant进入虚拟机，命令为</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vagrant ssh</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">D:\32689就可以</span></span><br></pre></td></tr></table></figure>
<h3 id="2-虚拟机root密码">2. 虚拟机root密码</h3>
<p>vagrant</p>
<h2 id="Docker">Docker</h2>
<blockquote>
<p>将各种组件变成容器</p>
</blockquote>
<h3 id="1-容器和镜像的概念">1. 容器和镜像的概念</h3>
<p>镜像更像是一个静态的结构，而容器是镜像的一个实例化</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker run name #从一个镜像中实例化出一个容器并启动</span><br><span class="line">docker start name #从容器ID启动一个容器 </span><br><span class="line">docker logs mysql #可以从日志里查一些报错信息</span><br></pre></td></tr></table></figure>
<h3 id="2-下载镜像">2. 下载镜像</h3>
<p><code>docker pull mysql:5.7\\下载一个固定版本5.7的mysql镜像</code></p>
<p><code>docker pull mysql\\下载最新版本的mysql镜像</code></p>
<h3 id="3-添加容器">3. 添加容器</h3>
<p>问题：在添加mysql容器时出现错误，容器能正常添加但启动不了；</p>
<p>原因：查到的原因是因为虚拟机Centos7禁掉了权限，无法使用-v命令进行挂载（但为什么添加redis没有问题）</p>
<p>解决：将要挂载的目录添加到白名单</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">chcon -Rt svirt_sandbox_file_t /mydata/mysql/log</span><br><span class="line">chcon -Rt svirt_sandbox_file_t /mydata/mysql/data</span><br><span class="line">chcon -Rt svirt_sandbox_file_t /mydata/mysql/conf</span><br></pre></td></tr></table></figure>
<h2 id="vue">vue</h2>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm run dev 启动前端</span><br><span class="line">npm init -y 开启一个npm项目</span><br><span class="line">npm install xxx 下载xxx</span><br></pre></td></tr></table></figure>
<h2 id="vue的使用（代码里）">vue的使用（代码里）</h2>
<p>有助于前后端分离？</p>
<ol>
<li>创建一个vue实例，将该实例与页面某个模块关联，</li>
<li>然后对应的模块就能与实例中的数据进行响应式交互了</li>
<li>可以用指令对数据进行操作</li>
</ol>
<p>eg：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;num&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;num++&quot;</span>&gt;</span>点赞<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;cancle&quot;</span>&gt;</span>取消点赞<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h</span>&gt;</span>&#123;&#123;chineseName&#125;&#125;,你一定会变得很厉害的！有&#123;&#123;num&#125;&#125;个人为你点赞<span class="tag">&lt;/<span class="name">h</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./node_modules/vue2/node_modules/vue/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&quot;lyn&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">chineseName</span>: <span class="string">&quot;刘雅妮&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">num</span>: <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">cancle</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">num</span>--;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="整合mybatis">整合mybatis</h2>
<ol>
<li>
<p>导入依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>最新版本<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>配置</p>
<ul>
<li>配置数据源
<ul>
<li>配置数据库驱动（注意驱动得对应数据库的版本）</li>
<li>application.yml配置数据数据源相关信息</li>
</ul>
</li>
<li>配置Mybatis-plus相关东西
<ul>
<li>使用@MapperScan（SpringBootApplication处配置，告诉应用mapper映射在那个包扫描）</li>
<li>告诉Mybatis-plus，sql映射文件位置在哪里</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="nacos">nacos</h2>
<p>打开nacos控制台：启动Nacos服务器：解压下载的Nacos文件，并进入解压后的目录。在命令行或终端中运行以下命令来启动Nacos服务器：</p>
<h1>快速开发</h1>
<h2 id="配置测试微服务基本CURD功能">配置测试微服务基本CURD功能</h2>
<h1>Spring Cloud Alibaba</h1>
<h2 id="1-Nacos">1. Nacos</h2>
<p>更易于构建云原生应用的<strong>动态服务发现</strong>、<strong>配置管理</strong>和服务管理平台</p>
<p>nacos的登陆密码改过了</p>
<h3 id="作为注册中心使用："><strong>作为注册中心使用：</strong></h3>
<ol>
<li>引入依赖</li>
<li>配置：（配置好地址和application的名字）</li>
</ol>
<p><img src="../images/%E8%B0%B7%E7%B2%92/image-20221130192515710.png" alt=""></p>
<ol start="3">
<li>在应用上加上@EnableDiscoveryClient3.</li>
</ol>
<h3 id="作为配置中心："><strong>作为配置中心：</strong></h3>
<ol>
<li>
<p>引入依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-config<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>创建一个bootstrap.properties，里面配置上，并且启动上Nacos服务器</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.application.name</span>=<span class="string">application_name （需要被配置的服务名称）</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.server-addr</span>=<span class="string">127.0.0.1:8848 (配置中心服务器地址)</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>在Nacos服务器中添加一个该应用的数据集（Data ID：应用名.properties）</p>
<p><img src="../images//%E8%B0%B7%E7%B2%92/image-20221204230159166.png" alt=""></p>
</li>
<li>
<p>动态获取配置，加上以下注解</p>
<p>@RefreshScope(proxyMode = ScopedProxyMode.DEFAULT)在Controller类上</p>
<p>@Value(“${配置项的名称}”)在属性上</p>
<p>注：如果配置中心和当前应用的配置文件中都配置了相同的项，优先使用配置中心的值</p>
</li>
</ol>
<p><strong>注意：</strong></p>
<ol>
<li>
<p>命名空间（配置隔离）</p>
<ul>
<li>可以按照环境隔离（例如：生产环境prod、测试环境test、开发环境dev）</li>
<li>也可以按照服务来隔离</li>
</ul>
<p>用法：</p>
<p>bootstrap.properties里指定一下读取的是哪个命名空间：(用命名空间ID表示)</p>
<p><img src="../images/%E8%B0%B7%E7%B2%92/image-20221204233041804.png" alt=""></p>
</li>
<li>
<p>配置集：配置的集合</p>
</li>
<li>
<p>配置集ID：Data ID就是配置集ID</p>
<p><img src="../images/%E8%B0%B7%E7%B2%92/image-20221204233205315-16701679257811.png" alt=""></p>
</li>
<li>
<p>配置分组配置集属于哪个分组</p>
<p>需要在bootstrap.properties中指定读取的配置分组</p>
</li>
</ol>
<p><strong>使用：</strong> 可以每个微服务创建自己的命名空间，使用配置分组区分环境（dev、prod、test）</p>
<p><strong>使用多配置集：</strong></p>
<p>bootstrap.properties中：指定一下就行（spring.cloud.nacos.config.ext-config是一个list）</p>
<p><img src="../images/%E8%B0%B7%E7%B2%92/image-20221205091022021.png" alt=""></p>
<h2 id="2-Feign声明式远程调用">2. Feign声明式远程调用</h2>
<p>声明式的Http客户端，让远程调用更简单。</p>
<p>写一个接口类，接口类上用某个注解标识要调用的服务名称，</p>
<p>再写抽象方法，抽象方法上用标识要调用的对应的服务的地址@RequestMapping</p>
<h2 id="3-Spring-Cloud-Gateway-网关">3. Spring Cloud Gateway(网关)</h2>
<blockquote>
<p>网关的用处：</p>
<ol>
<li>感知服务的上线、下线，帮助请求路由到对应的服务中</li>
<li>鉴权</li>
</ol>
</blockquote>
<h1>前端开发</h1>
<h2 id="ES6">ES6</h2>
<blockquote>
<p>ES6， 全称 ECMAScript 6.0 ，是 <strong>JavaScript 的下一个版本标准</strong>，2015.06 发版。</p>
</blockquote>
<h2 id="vue-2">vue</h2>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm run dev 启动前端</span><br><span class="line">npm init -y 开启一个npm项目</span><br><span class="line">npm install xxx 下载xxx</span><br></pre></td></tr></table></figure>
<h3 id="1-vue的使用（代码里）">1. vue的使用（代码里）</h3>
<p>有助于前后端分离？</p>
<ol>
<li>创建一个vue实例，将该实例与页面某个模块关联，</li>
<li>然后对应的模块就能与实例中的数据进行响应式交互了</li>
<li>可以用指令对数据进行操作</li>
</ol>
<p>eg：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;num&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;num++&quot;</span>&gt;</span>点赞<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;cancle&quot;</span>&gt;</span>取消点赞<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h</span>&gt;</span>&#123;&#123;chineseName&#125;&#125;,你一定会变得很厉害的！有&#123;&#123;num&#125;&#125;个人为你点赞<span class="tag">&lt;/<span class="name">h</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./node_modules/vue2/node_modules/vue/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&quot;lyn&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">chineseName</span>: <span class="string">&quot;刘雅妮&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">num</span>: <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">cancle</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">num</span>--;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1>问题</h1>
<h2 id="1-跨域">1. 跨域</h2>
<p>后端的renrenfast项目config/Corsconfig中的注释打开</p>
<p>浏览器有一个同源策略，是不允许跨域的。（非简单请求不允许跨域，简单请求可以）</p>
<p>浏览器在发送真实的非简单请求以前·会先发一个OPTION类型的预检请求，让对方判断是否能能访问</p>
<p><img src="../images/%E8%B0%B7%E7%B2%92/image-20230707083035832.png" alt=""></p>
<h3 id="解决方案">解决方案</h3>
<ol>
<li>用代理将两个请求部署为同一个域</li>
</ol>
<p><img src="../images/%E8%B0%B7%E7%B2%92/image-20230707000435172.png" alt=""></p>
<ol start="2">
<li>设置响应头，搞一个filter？</li>
</ol>
<h1>进度</h1>
<p>写一个删除功能, P51</p>
<p>and 虚拟机重新装了一遍，数据和配置都没了。现在已经装了redis和mysql，但网络访问有点问题，先是主机连虚拟机的mysql时有那个远程访问权限的问题，之后就主机连不到虚拟机了，ping不通。</p>
<h1>End</h1>
<table>
<thead>
<tr>
<th>delivery_id</th>
<th>customer_id</th>
<th>order_date</th>
<th>customer_pref_delivery_date</th>
</tr>
</thead>
<tbody>
<tr>
<td>289</td>
<td>7</td>
<td>2019-07-08</td>
<td>2019-08-13</td>
</tr>
<tr>
<td>85</td>
<td>90</td>
<td>2019-08-01</td>
<td>2019-08-18</td>
</tr>
<tr>
<td>982</td>
<td>82</td>
<td>2019-07-01</td>
<td>2019-08-16</td>
</tr>
<tr>
<td>325</td>
<td>61</td>
<td>2019-08-30</td>
<td>2019-08-30</td>
</tr>
<tr>
<td>652</td>
<td>18</td>
<td>2019-08-05</td>
<td>2019-08-15</td>
</tr>
<tr>
<td>176</td>
<td>64</td>
<td>2019-07-02</td>
<td>2019-07-02</td>
</tr>
<tr>
<td>248</td>
<td>86</td>
<td>2019-07-19</td>
<td>2019-08-04</td>
</tr>
<tr>
<td>557</td>
<td>41</td>
<td>2019-07-10</td>
<td>2019-07-25</td>
</tr>
<tr>
<td>426</td>
<td>47</td>
<td>2019-07-01</td>
<td>2019-08-03</td>
</tr>
<tr>
<td>1000</td>
<td>20</td>
<td>2019-07-17</td>
<td>2019-07-17</td>
</tr>
<tr>
<td>947</td>
<td>71</td>
<td>2019-07-14</td>
<td>2019-08-18</td>
</tr>
<tr>
<td>379</td>
<td>27</td>
<td>2019-07-09</td>
<td>2019-08-14</td>
</tr>
<tr>
<td>886</td>
<td>42</td>
<td>2019-07-02</td>
<td>2019-08-18</td>
</tr>
<tr>
<td>943</td>
<td>94</td>
<td>2019-08-06</td>
<td>2019-08-08</td>
</tr>
<tr>
<td>87</td>
<td>85</td>
<td>2019-07-19</td>
<td>2019-07-29</td>
</tr>
<tr>
<td>179</td>
<td>98</td>
<td>2019-07-31</td>
<td>2019-07-31</td>
</tr>
<tr>
<td>733</td>
<td>53</td>
<td>2019-08-22</td>
<td>2019-08-24</td>
</tr>
<tr>
<td>224</td>
<td>81</td>
<td>2019-08-29</td>
<td>2019-08-31</td>
</tr>
<tr>
<td>394</td>
<td>78</td>
<td>2019-07-29</td>
<td>2019-07-29</td>
</tr>
<tr>
<td>149</td>
<td>1</td>
<td>2019-08-29</td>
<td>2019-08-29</td>
</tr>
<tr>
<td>169</td>
<td>100</td>
<td>2019-07-27</td>
<td>2019-08-31</td>
</tr>
<tr>
<td>977</td>
<td>92</td>
<td>2019-08-17</td>
<td>2019-08-31</td>
</tr>
<tr>
<td>492</td>
<td>63</td>
<td>2019-08-23</td>
<td>2019-08-23</td>
</tr>
<tr>
<td>686</td>
<td>88</td>
<td>2019-07-06</td>
<td>2019-08-26</td>
</tr>
<tr>
<td>638</td>
<td>91</td>
<td>2019-08-19</td>
<td>2019-08-24</td>
</tr>
<tr>
<td>405</td>
<td>74</td>
<td>2019-08-27</td>
<td>2019-08-30</td>
</tr>
<tr>
<td>861</td>
<td>10</td>
<td>2019-08-08</td>
<td>2019-08-24</td>
</tr>
<tr>
<td>984</td>
<td>19</td>
<td>2019-07-17</td>
<td>2019-07-30</td>
</tr>
<tr>
<td>702</td>
<td>5</td>
<td>2019-07-21</td>
<td>2019-08-20</td>
</tr>
<tr>
<td>350</td>
<td>3</td>
<td>2019-08-05</td>
<td>2019-08-05</td>
</tr>
<tr>
<td>449</td>
<td>9</td>
<td>2019-08-07</td>
<td>2019-08-11</td>
</tr>
<tr>
<td>397</td>
<td>83</td>
<td>2019-08-12</td>
<td>2019-08-21</td>
</tr>
<tr>
<td>526</td>
<td>6</td>
<td>2019-08-02</td>
<td>2019-08-02</td>
</tr>
<tr>
<td>574</td>
<td>68</td>
<td>2019-08-15</td>
<td>2019-08-18</td>
</tr>
<tr>
<td>190</td>
<td>46</td>
<td>2019-07-18</td>
<td>2019-08-19</td>
</tr>
<tr>
<td>476</td>
<td>70</td>
<td>2019-07-21</td>
<td>2019-07-21</td>
</tr>
<tr>
<td>104</td>
<td>72</td>
<td>2019-08-30</td>
<td>2019-08-30</td>
</tr>
<tr>
<td>881</td>
<td>58</td>
<td>2019-07-18</td>
<td>2019-07-18</td>
</tr>
<tr>
<td>47</td>
<td>49</td>
<td>2019-07-23</td>
<td>2019-07-26</td>
</tr>
<tr>
<td>65</td>
<td>15</td>
<td>2019-07-28</td>
<td>2019-08-20</td>
</tr>
</tbody>
</table>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://xyat98.github.io/2024/01/13/SpringBoot/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/IMG_9443.JPG">
      <meta itemprop="name" content="y-n">
      <meta itemprop="description" content="Faith is a substance of things hoped for, the evidence of things not seen.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Liu">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/01/13/SpringBoot/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-01-13 21:10:54" itemprop="dateCreated datePublished" datetime="2024-01-13T21:10:54+08:00">2024-01-13</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>Hello， …/images/SpringBoot</h1>
<h2 id="1-创建maven工程">1. 创建maven工程</h2>
<p>要求：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.java.com/">Java 8</a> &amp; 兼容java14 .</li>
<li>Maven 3.3+</li>
<li>idea 2019.1.2</li>
</ul>
<h2 id="2-引入依赖">2. 引入依赖</h2>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="3-创建主程序">3. 创建主程序</h2>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] argvs)</span>&#123;</span><br><span class="line">        SpringApplication.run(Application.class,argvs);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-编写业务">4. 编写业务</h2>
<p><img src="../images/SpringBoot/image-20221114141614658.png" alt=""></p>
<h2 id="5-测试">5. 测试</h2>
<p>直接运行main方法就好</p>
<h2 id="6-简化配置">6. 简化配置</h2>
<p><img src="../images/SpringBoot/image-20221114135307050.png" alt=""></p>
<p>application.properties这个文件里能做一些tomcat方面的修改，具体能修改什么配置可以看官方文档：</p>
<p><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#appendix.application-properties">配置修改</a></p>
<h2 id="7-简化部署">7. 简化部署</h2>
<p>在pom.xml中加入：（这个插件帮我们部署）</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>打包：选择clean和package，点右上角的三角符号</p>
<p><img src="../images/SpringBoot/image-20221114140543476.png" alt=""></p>
<p>生成了jar包（默认打包成jar包）</p>
<p><img src="../images/SpringBoot/image-20221114140639904.png" alt=""></p>
<p>可以直接执行jar包。命令：java -jar xxx.jar</p>
<p><img src="../images/SpringBoot/image-20221114140721563.png" alt=""></p>
<h1>自动配置</h1>
<h2 id="1-依赖管理">1. 依赖管理</h2>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># parent依赖管理，父项目几乎声明了所有开发中常用的依赖的版本号,自动版本仲裁机制</span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"># 它的父项目</span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>如果需要更改某一个依赖的版本号的话，用properties修改，如将mysql驱动修改为5.1.43版本：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mysql.version</span>&gt;</span>5.1.43<span class="tag">&lt;/<span class="name">mysql.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1>注解</h1>
<h2 id="1-RestController">1. @RestController</h2>
<p>@RestController== @Controller + @ResponseBody</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://xyat98.github.io/2024/01/13/SpringMVC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/IMG_9443.JPG">
      <meta itemprop="name" content="y-n">
      <meta itemprop="description" content="Faith is a substance of things hoped for, the evidence of things not seen.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Liu">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/01/13/SpringMVC/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-01-13 21:10:54" itemprop="dateCreated datePublished" datetime="2024-01-13T21:10:54+08:00">2024-01-13</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>1. HelloWorld</h1>
<h2 id="1-创建maven工程">1. 创建maven工程</h2>
<h2 id="2-引入依赖">2. 引入依赖</h2>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--        设置打包方式为war--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--        servlet api--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--        spring MVC--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--        前端解析器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.thymeleaf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf-spring5<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.12.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="3-配置tomcat以及web">3. 配置tomcat以及web</h2>
<p><img src="../images/SpringMVC/image-20221114145800061.png" alt=""></p>
<p><img src="../images/SpringMVC/image-20221114145833074.png" alt=""></p>
<p>配置web资源（资源对应的url）</p>
<p><img src="../images/SpringMVC/image-20221114180341127.png" alt=""></p>
<h2 id="4-创建web-xml">4. 创建web.xml</h2>
<ol>
<li>
<p>web.xml配置DispatcherServlet（不过是怎么找到springMVC.xml</p>
<p>这个文件的呢）</p>
</li>
</ol>
<p>​	<img src="../images/SpringMVC/image-20221107135035680.png" alt=""></p>
<ol start="2">
<li>
<p>增加springMVC.xml（读取这个文件创建DispatcherServlet）也可以直接用默认的</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc https://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--开启组件扫描器，扫描包中注解，生成相应的bean--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;org.example&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;viewResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.view.ThymeleafViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;order&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;characterEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateEngine&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.SpringTemplateEngine&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateResolver&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.templateresolver.SpringResourceTemplateResolver&quot;</span>&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!--                        &amp;lt;!&amp;ndash; 视图前缀 &amp;ndash;&amp;gt;--&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!--                        &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/templates/&quot;/&gt;--&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!-- 视图后缀 --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.html&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateMode&quot;</span> <span class="attr">value</span>=<span class="string">&quot;HTML5&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;characterEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--    开放对静态资源的访问--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>一个请求的访问过程：</p>
<p><img src="../images/SpringMVC/image-20221107135618500.png" alt=""></p>
<ul>
<li>1 客户端请求提交到 DispatcherServlet</li>
<li>2 由 DispatcherServlet 控制器查询一个或多个 HandlerMapping，找到处理请求的Controller</li>
<li>3 DispatcherServlet 将请求提交到 Controller（也称为 Handler）</li>
<li>4 Controller 调用业务逻辑处理后，返回 ModelAndView</li>
<li>5 DispatcherServlet 查询一个或多个 ViewResoler 视图解析器，找到 ModelAndView指定的视图</li>
<li>6 视图负责将结果显示到客户端</li>
</ul>
<h2 id="5-编写业务逻辑以及测试">5. 编写业务逻辑以及测试</h2>
<p><img src="../images/SpringMVC/image-20221114180455322.png" alt=""></p>
<h1>2. @RequestMapping（@PostMapping、@GetMapping）</h1>
<h2 id="1-用处：为控制器指定可以处理哪些URL请求，DispatcherServlet截获请求后，通过控制器上-RequestMapping映射到具体的处理方法">1. 用处：为控制器指定可以处理哪些URL请求，DispatcherServlet截获请求后，通过控制器上@RequestMapping映射到具体的处理方法</h2>
<h2 id="2-标记位置：类或方法上">2. 标记位置：类或方法上</h2>
<ul>
<li>类上：提供初步的请求映射信息。相对于 WEB 应用的根目录</li>
<li>方法上：提供进一步的细分映射信息。相对于标记在类上的URL。</li>
</ul>
<h2 id="3-value属性">3. value属性</h2>
<p>具体映射的URL</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;testPOJO&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">testPojo</span><span class="params">(User user)</span>&#123;</span><br><span class="line">       System.out.println(user);</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;target&quot;</span>;</span><br><span class="line">   &#125;</span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;testPOJO&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">testPojo</span><span class="params">(User user)</span>&#123;</span><br><span class="line">       System.out.println(user);</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;target&quot;</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-method属性">4. method属性</h2>
<p>该控制器（Controller方法）支持的请求方式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;testPOJO&quot;,method = RequestMethod.POST)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">testPojo</span><span class="params">(User user)</span>&#123;</span><br><span class="line">       System.out.println(user);</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;target&quot;</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-params属性">5. params属性</h2>
<p>要求映射的请求必须带有的params</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(method = &#123;RequestMethod.GET,RequestMethod.POST&#125;,</span></span><br><span class="line"><span class="meta">            value = &#123;&quot;/getTest&quot;,&quot;postTest&quot;&#125;,</span></span><br><span class="line"><span class="meta">            params = &#123;&quot;username&quot;,&quot;password!=123&quot;&#125;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testMethod</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;target&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>“param”：要求请求映射所匹配的请求必须携带param请求参数</p>
<p>“!param”：要求请求映射所匹配的请求必须不能携带param请求参数</p>
<p>“param=value”：要求请求映射所匹配的请求必须携带param请求参数且param=value</p>
<p>“param!=value”：要求请求映射所匹配的请求必须携带param请求参数但是param!=value</p>
<p>若当前请求满足@RequestMapping注解的value和method属性，但是不满足params属性，此时页面显示400错误，parameter conditions xxx not met for actual request parameters</p>
<h2 id="6-headers属性">6. headers属性</h2>
<p>要求映射的请求必须带有的header请求信息</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(method = &#123;RequestMethod.GET,RequestMethod.POST&#125;,</span></span><br><span class="line"><span class="meta">            value = &#123;&quot;/getTest&quot;,&quot;postTest&quot;&#125;,</span></span><br><span class="line"><span class="meta">            headers = &#123;&quot;Host=localhost:8080&quot;&#125;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testMethod</span><span class="params">(HttpServletRequest request)</span>&#123;</span><br><span class="line">        System.out.println(request.getParameter(<span class="string">&quot;username&quot;</span>));</span><br><span class="line">        System.out.println(request.getParameter(<span class="string">&quot;password&quot;</span>));</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;target&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>“header”：要求请求映射所匹配的请求必须携带header请求头信息</p>
<p>“!header”：要求请求映射所匹配的请求必须不能携带header请求头信息</p>
<p>“header=value”：要求请求映射所匹配的请求必须携带header请求头信息且header=value</p>
<p>“header!=value”：要求请求映射所匹配的请求必须携带header请求头信息且header!=value</p>
<p>若当前请求满足@RequestMapping注解的value和method属性，但是不满足headers属性，此时页面显示404错误，即资源未找到</p>
<h2 id="7-…-images-SpringMVC支持ant风格路径">7. …/images/SpringMVC支持ant风格路径</h2>
<p>？：表示任意的单个字符</p>
<p>*：表示任意的0个或多个字符</p>
<p>**：表示任意的一层或多层目录</p>
<h2 id="8-SpirngMVC支持路径中的占位符">8. SpirngMVC支持路径中的占位符</h2>
<p>原始方式：/deleteUser?id=1</p>
<p>rest方式：/deleteUser/1</p>
<p>…/images/SpringMVC路径中的占位符常用于RESTful风格中，当请求路径中将某些数据通过路径的方式传输到服务器中，就可以在相应的@RequestMapping注解的value属性中通过占位符{xxx}表示传输的数据，在通过**@PathVariable**注解，将占位符所表示的数据赋值给控制器方法的形参</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;a th:href=<span class="string">&quot;@&#123;/testRest/1/admin&#125;&quot;</span>&gt;测试路径中的占位符--&gt;/testRest&lt;/a&gt;&lt;br&gt;</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/testRest/&#123;id&#125;/&#123;username&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testRest</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> String id, <span class="meta">@PathVariable(&quot;username&quot;)</span> String username)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;id:&quot;</span>+id+<span class="string">&quot;,username:&quot;</span>+username);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//最终输出的内容为--&gt;id:1,username:admin</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1>获取请求参数</h1>
<h2 id="1-通过原生Servlet-API获取">1. 通过原生Servlet API获取</h2>
<p>原生Servlet API：HttpServletRequest</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testParam&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testParam</span><span class="params">(HttpServletRequest request)</span>&#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;username:&quot;</span>+username+<span class="string">&quot;,password:&quot;</span>+password);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-通过控制器获取">2. 通过控制器获取</h2>
<p>控制器方法中设置和请求参数同名的形参</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testParam&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testParam</span><span class="params">(String username, String password, String hobbies)</span>&#123; 	</span><br><span class="line">    System.out.println(<span class="string">&quot;username:&quot;</span>+username+<span class="string">&quot;,password:&quot;</span>+password);</span><br><span class="line">    System.out.println(Arrays.toString(hobbies));</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果有多个同名参数，可用字符串数组获取，若用字符串获取，那么得到的是一个用逗号分隔开的参数拼接</p>
<h2 id="3-RequestParam">3. @RequestParam</h2>
<ul>
<li>
<p>用处：用@RequestParam将请求参数和控制器形参创建映射关系</p>
</li>
<li>
<p>位置：用在控制器方法的形参上</p>
</li>
<li>
<p>属性：</p>
<ul>
<li>value：对应的请求参数的参数名</li>
<li>required：是否必须传输此请求参数，默认false</li>
<li>defaultValue：不管required属性值为true或false，当value所指定的请求参数没有传输或传输的值为&quot;&quot;时，则使用默认值为形参赋值</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;success&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">success</span><span class="params">(<span class="meta">@RequestParam(&quot;username&quot;)</span> String user_name)</span>&#123;</span><br><span class="line">    System.out.println(user_name);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="4-RequestHeader">4. @RequestHeader</h2>
<p>@RequestHeader是将请求头信息和控制器方法的形参创建映射关系</p>
<p>@RequestHeader注解一共有三个属性：value、required、defaultValue，用法同@RequestParam</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;testHeader&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testHeader</span><span class="params">(<span class="meta">@RequestHeader(&quot;Host&quot;)</span> String host)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;host:&quot;</span>+host);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-CookieValue">5. @CookieValue</h2>
<p>@CookieValue是将cookie数据和控制器方法的形参创建映射关系</p>
<p>@CookieValue注解一共有三个属性：value、required、defaultValue，用法同@RequestParam</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;testCookie&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testCookie</span><span class="params">(<span class="meta">@CookieValue(&quot;JSESSIONID&quot;)</span> String cookieId)</span>&#123;</span><br><span class="line">    httpServletRequest.getSession();</span><br><span class="line">    System.out.println(cookieId);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6-通过POJO获取请求参数（POJO：实体类对象）">6. 通过POJO获取请求参数（POJO：实体类对象）</h2>
<p>通过实体类获取众多请求参数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;testPOJO&quot;,method = RequestMethod.POST)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testPojo</span><span class="params">(User user1)</span>&#123;</span><br><span class="line">    System.out.println(user1);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;target&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/testPOJO&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;POST&quot;</span>&gt;</span></span><br><span class="line">    username: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    password: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    email: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    age: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    city: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;address.city&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    province: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;address.province&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Submit&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="7-解决获取到的请求参数乱码问题">7. 解决获取到的请求参数乱码问题</h2>
<blockquote>
<p>需要在获取到请求参数之前做处理</p>
</blockquote>
<p>web.xml中配置编码过滤器</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置springMVC的编码过滤器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceResponseEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span><span class="comment">&lt;!--对所有URL生效--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1>域对象共享数据</h1>
<p>钝化：当服务器关闭而浏览器没有关闭时，会话没有关系，session中存储的数据会经过序列化存储在我们的磁盘上</p>
<p>活化：浏览器仍没有关闭切服务器重新开启时，将存储在磁盘中的session数据（钝化后的数据）重新读取到session中</p>
<h2 id="request域对象">request域对象</h2>
<h3 id="1-用servlet-API向request域对象里添加数据">1. 用servlet API向request域对象里添加数据</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;test&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testScopeCOntroller</span><span class="params">(HttpServletRequest httpServletRequest)</span>&#123;</span><br><span class="line">    httpServletRequest.setAttribute(<span class="string">&quot;scopeTest&quot;</span>,<span class="string">&quot;hello scope&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">success!</span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;scopeTest&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="2-使用ModelAndView向request域对象共享数据">2. 使用ModelAndView向request域对象共享数据</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;test2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ModelAndView <span class="title function_">testScopeController2</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">ModelAndView</span> <span class="variable">mav</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">    <span class="comment">//往请求域中添加属性</span></span><br><span class="line">    mav.addObject(<span class="string">&quot;scopeTest&quot;</span>,<span class="string">&quot;hello scope2!&quot;</span>);</span><br><span class="line">    <span class="comment">//设置要转发的视图名称</span></span><br><span class="line">    mav.setViewName(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> mav;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-通过Model向request域对象共享数据">3. 通过Model向request域对象共享数据</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;test3&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testModel</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">    model.addAttribute(<span class="string">&quot;scopeTest&quot;</span>,<span class="string">&quot;hello model!&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-通过map向request域对象共享数据">4. 通过map向request域对象共享数据</h3>
<p>感觉和model是一样的</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;test4&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testMap</span><span class="params">(Map&lt;String,Object&gt; map)</span>&#123;</span><br><span class="line">    map.put(<span class="string">&quot;scopeTest&quot;</span>,<span class="string">&quot;hello map!&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-使用ModelMap向request域对象共享数据">5. 使用ModelMap向request域对象共享数据</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/test5&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testModelMap</span><span class="params">(ModelMap modelMap)</span>&#123;</span><br><span class="line">    modelMap.addAttribute(<span class="string">&quot;scopeTest&quot;</span>, <span class="string">&quot;hello,ModelMap&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="6-Model、ModelMap、Map的关系">6. Model、ModelMap、Map的关系</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Model</span>&#123;&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ModelMap</span> <span class="keyword">extends</span> <span class="title class_">LinkedHashMap</span>&lt;String, Object&gt; &#123;&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExtendedModelMap</span> <span class="keyword">extends</span> <span class="title class_">ModelMap</span> <span class="keyword">implements</span> <span class="title class_">Model</span> &#123;&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BindingAwareModelMap</span> <span class="keyword">extends</span> <span class="title class_">ExtendedModelMap</span> &#123;&#125;</span><br></pre></td></tr></table></figure>
<h2 id="向session域共享数据">向session域共享数据</h2>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testSession&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testSession</span><span class="params">(HttpSession session)</span>&#123;</span><br><span class="line">    session.setAttribute(<span class="string">&quot;testSessionScope&quot;</span>, <span class="string">&quot;hello,session&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.sessionTest&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="向application域共享数据">向application域共享数据</h2>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;test6&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testApplication</span><span class="params">(HttpSession session)</span>&#123;</span><br><span class="line">    <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> session.getServletContext();</span><br><span class="line">    servletContext.setAttribute(<span class="string">&quot;applicationTest&quot;</span>,<span class="string">&quot;hello,application!&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;application.applicationTest&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1>…/images/SpringMVC的视图</h1>
<p>…/images/SpringMVC中的视图是View接口，视图的作用渲染数据，将模型Model中的数据展示给用户</p>
<p>…/images/SpringMVC视图的种类很多，默认有转发视图和重定向视图</p>
<p>当工程引入jstl的依赖，转发视图会自动转换为JstlView</p>
<p>若使用的视图技术为Thymeleaf，在…/images/SpringMVC的配置文件中配置了Thymeleaf的视图解析器，由此视图解析器解析之后所得到的是ThymeleafView</p>
<h3 id="1、ThymeleafView"><a target="_blank" rel="noopener" href="https://mowangblog.github.io/../images/SpringMVC-Demo/#/?id=_1%E3%80%81thymeleafview">1、ThymeleafView</a></h3>
<p>当控制器方法中所设置的视图名称没有任何前缀时，此时的视图名称会被…/images/SpringMVC配置文件中所配置的视图解析器解析，视图名称拼接视图前缀和视图后缀所得到的最终路径，会通过转发的方式实现跳转</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testHello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testHello</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2、转发视图"><a target="_blank" rel="noopener" href="https://mowangblog.github.io/../images/SpringMVC-Demo/#/?id=_2%E3%80%81%E8%BD%AC%E5%8F%91%E8%A7%86%E5%9B%BE">2、转发视图</a></h3>
<p>SpringMVC中默认的转发视图是InternalResourceView</p>
<p>SpringMVC中创建转发视图的情况：</p>
<p>当控制器方法中所设置的视图名称以&quot;forward:&quot;为前缀时，创建InternalResourceView视图，此时的视图名称不会被…/images/SpringMVC配置文件中所配置的视图解析器解析，而是会将前缀&quot;forward:&quot;去掉，剩余部分作为最终路径通过转发的方式实现跳转</p>
<p>例如&quot;forward:/&quot;，“forward:/employee”</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testForward&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testForward</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;forward:/testHello&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3、重定向视图"><a target="_blank" rel="noopener" href="https://mowangblog.github.io/../images/SpringMVC-Demo/#/?id=_3%E3%80%81%E9%87%8D%E5%AE%9A%E5%90%91%E8%A7%86%E5%9B%BE">3、重定向视图</a></h3>
<p>…/images/SpringMVC中默认的重定向视图是RedirectView</p>
<p>当控制器方法中所设置的视图名称以&quot;redirect:&quot;为前缀时，创建RedirectView视图，此时的视图名称不会被…/images/SpringMVC配置文件中所配置的视图解析器解析，而是会将前缀&quot;redirect:&quot;去掉，剩余部分作为最终路径通过重定向的方式实现跳转</p>
<p>例如&quot;redirect:/&quot;，“redirect:/employee”</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testRedirect&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testRedirect</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;redirect:/testHello&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">1234Copy to clipboardErrorCopied</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注：</p>
<p>重定向视图在解析时，会先将redirect:前缀去掉，然后会判断剩余部分是否以/开头，若是则会自动拼接上下文路径</p>
</blockquote>
<h3 id="4、视图控制器view-controller"><a target="_blank" rel="noopener" href="https://mowangblog.github.io/../images/SpringMVC-Demo/#/?id=_4%E3%80%81%E8%A7%86%E5%9B%BE%E6%8E%A7%E5%88%B6%E5%99%A8view-controller">4、视图控制器view-controller</a></h3>
<p>当控制器方法中，仅仅用来实现页面跳转，即只需要设置视图名称时，可以将处理器方法使用view-controller标签进行表示</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    path：设置处理的请求地址</span></span><br><span class="line"><span class="comment">    view-name：设置请求地址所对应的视图名称</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">&quot;/testView&quot;</span> <span class="attr">view-name</span>=<span class="string">&quot;success&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:view-controller</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注：</p>
<p>当…/images/SpringMVC中设置任何一个view-controller时，其他控制器中的请求映射将全部失效，此时需要在SpringMVC的核心配置文件中设置开启mvc注解驱动的标签：</p>
<p>&lt;mvc:annotation-driven /&gt;</p>
</blockquote>
<h1>RESTFul</h1>
<blockquote>
<p>REST：<strong>Re</strong>presentational <strong>S</strong>tate <strong>T</strong>ransfer，表现层资源状态转移。</p>
</blockquote>
<p>感觉这是一种风格</p>
<p>具体说，就是 HTTP 协议里面，四个表示操作方式的动词：GET、POST、PUT、DELETE。</p>
<p>它们分别对应四种基本操作：GET 用来获取资源，POST 用来新建资源，PUT 用来更新资源，DELETE 用来删除资源。</p>
<p>REST 风格提倡 URL 地址使用统一的风格设计，从前到后各个单词使用斜杠分开，不使用问号键值对方式携带请求参数，而是将要发送给服务器的数据作为 URL 地址的一部分，以保证整体风格的一致性。</p>
<table>
<thead>
<tr>
<th>操作</th>
<th>传统方式</th>
<th>REST风格</th>
</tr>
</thead>
<tbody>
<tr>
<td>查询操作</td>
<td>getUserById?id=1</td>
<td>user/1–&gt;get请求方式</td>
</tr>
<tr>
<td>保存操作</td>
<td>saveUser</td>
<td>user–&gt;post请求方式</td>
</tr>
<tr>
<td>删除操作</td>
<td>deleteUser?id=1</td>
<td>user/1–&gt;delete请求方式</td>
</tr>
<tr>
<td>更新操作</td>
<td>updateUser</td>
<td>user–&gt;put请求方式</td>
</tr>
</tbody>
</table>
<p><strong>案例：</strong></p>
<p>​	前端请求</p>
<p><img src="../images/SpringMVC/image-20221112090331497.png" alt=""></p>
<p><img src="../images/SpringMVC/image-20221112091830002.png" alt=""></p>
<p>后端：</p>
<p><img src="../images/SpringMVC/image-20221112091859889.png" alt=""></p>
<h2 id="如何实现PUT和DELETE请求呢">如何实现PUT和DELETE请求呢</h2>
<p>由于浏览器只有get和post两种请求，而服务器（或者是RequestMapping）是能解决删除和更新操作的。</p>
<p><strong>实现逻辑</strong>：</p>
<ol>
<li>前端的请求方法是<strong>POST</strong>，且必须<strong>携带请求参数_method</strong>（其值等于对应的请求例如DELETE或PUT）</li>
<li>在web.xml中注册<strong>HiddenHttpMethodFilter</strong></li>
</ol>
<p><strong>原理：</strong></p>
<ol>
<li>HiddenHttpMethodFilter接收到这个请求之后先把这个请求的请求方式转换成_method的值 （如：DETELE或PUT方式）。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">\\HiddenHttpMethodFilter</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doFilterInternal</span><span class="params">(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="type">HttpServletRequest</span> <span class="variable">requestToUse</span> <span class="operator">=</span> request;</span><br><span class="line">    <span class="keyword">if</span> (<span class="string">&quot;POST&quot;</span>.equals(request.getMethod()) &amp;&amp; request.getAttribute(<span class="string">&quot;javax.servlet.error.exception&quot;</span>) == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">paramValue</span> <span class="operator">=</span> request.getParameter(<span class="built_in">this</span>.methodParam);</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.hasLength(paramValue)) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> paramValue.toUpperCase(Locale.ENGLISH);</span><br><span class="line">            <span class="keyword">if</span> (ALLOWED_METHODS.contains(method)) &#123;</span><br><span class="line">                requestToUse = <span class="keyword">new</span> <span class="title class_">HttpMethodRequestWrapper</span>(request, method);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    filterChain.doFilter((ServletRequest)requestToUse, response);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line">    ALLOWED_METHODS = Collections.unmodifiableList(Arrays.asList(HttpMethod.PUT.name(), HttpMethod.DELETE.name(), HttpMethod.PATCH.name()));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>HttpMessageConverter</h1>
<blockquote>
<p>HttpMessageConverter，报文信息转换器，将请求报文转换为Java对象，或将Java对象转换为响应报文</p>
<p>HttpMessageConverter提供了两个注解和两个类型：</p>
<p>@RequestBody，@ResponseBody，RequestEntity，ResponseEntity</p>
</blockquote>
<h2 id="RequestBody">@RequestBody</h2>
<p>将请求参数转换成Java对象</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/testRequestBody&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    密码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testRequestBody&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testRequestBody</span><span class="params">(<span class="meta">@RequestBody</span> String requestBody)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;requestBody:&quot;</span>+requestBody);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>output:</strong>  requestBody:username=admin&amp;password=password</p>
<h2 id="RequestEntity">RequestEntity</h2>
<p>这是一个类型，controller中用这种类型的参数能接收请求报文（除了请求参数还有请求头等一系列信息）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testRequestEntity&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testRequestEntity</span><span class="params">(RequestEntity&lt;String&gt; requestEntity)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;requestHeader:&quot;</span>+requestEntity.getHeaders());</span><br><span class="line">    System.out.println(<span class="string">&quot;requestBody:&quot;</span>+requestEntity.getBody());</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>output:</strong> requestHeader:[host:“localhost:8080”, connection:“keep-alive”, content-length:“27”, cache-control:“max-age=0”, sec-ch-ua:“” Not A;Brand&quot;;v=“99”, “Chromium”;v=“90”, “Google Chrome”;v=“90&quot;”, sec-ch-ua-mobile:“?0”, upgrade-insecure-requests:“1”, origin:“<a href="http://localhost:8080%E2%80%9D/">http://localhost:8080”</a>, user-agent:“Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.93 Safari/537.36”] requestBody:username=admin&amp;password=123</p>
<h2 id="ResponseEntity">ResponseEntity</h2>
<p>ResponseEntity用于控制器方法的返回值类型，该控制器方法的返回值就是响应到浏览器的响应报文</p>
<h2 id="ResponseBody">@ResponseBody</h2>
<p>用在控制器方法上，可以将Java对象转换成json格式的响应体响应到浏览器。</p>
<p><strong>注：</strong></p>
<ul>
<li>项目中需要有能转换json的依赖</li>
</ul>
<p><strong>做法：</strong></p>
<p>a&gt;导入jackson的依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.12.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>b&gt;在…/images/SpringMVC的核心配置文件中开启mvc的注解驱动，此时在HandlerAdaptor中会自动装配一个消息转换器：MappingJackson2HttpMessageConverter，可以将响应到浏览器的Java对象转换为Json格式的字符串</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="RestController">@RestController</h2>
<p>@RestController注解是springMVC提供的一个复合注解，标识在控制器的类上，就相当于为类添加了@Controller注解，并且为其中的每个方法添加了@ResponseBody注解</p>
<h1>其他</h1>
<p>访问请求的方式：（浏览器只有get和post请求）</p>
<p>get请求：（地址映射controller的RequestMapping，以下这两种其实是一种）</p>
<ul>
<li>点击页面中的链接</li>
<li>直接用链接访问</li>
</ul>
<p>post请求：（没办法直接通过链接访问—这是get方式的请求）</p>
<ul>
<li>通过 html中的表单标签（form, action属性指向请求地址）</li>
</ul>
<h1>…/images/SpringMVC工作原理</h1>
<ol>
<li>请求给到前端控制器DispatcherServlet</li>
<li>DispatcherServlet收到请求后会根据请求的信息（包括URL、HTTP协议方法、请求头、请求参数、Cookie等）以及HandlerMapping的配置找到处理该请求的Handler（任何一个对象都可以作为请求的Handler）。</li>
<li>在这个地方Spring会通过HandlerAdapter对该处理器进行封装。（HandlerAdapter是一个适配器，它用统一的接口对各种Handler中的方法进行调用。）</li>
<li>Handler（Controller）处理完请求后，返回一个ModelAndView（包含数据模型和相应视图信息）给到DispatcherServlet</li>
<li>DispatcherServlet借助ViewResolver完成从逻辑视图到真实视图的解析</li>
<li>得到真实视图后，DispatcherServlet会利用视图对象对模型数据进行渲染。</li>
<li>客户端得到响应，可能是一个普通的HTML页面，也可以是XML或JSON字符串，还可以是一张图片或者一个PDF文件。</li>
</ol>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/6/16/16b5eb3870589ac4~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.image" alt=""></p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/6/16/16b5eb3cc1ab2fe9~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.image" alt=""></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://xyat98.github.io/2024/01/13/Spring%E6%A1%86%E6%9E%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/IMG_9443.JPG">
      <meta itemprop="name" content="y-n">
      <meta itemprop="description" content="Faith is a substance of things hoped for, the evidence of things not seen.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Liu">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/01/13/Spring%E6%A1%86%E6%9E%B6/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-01-13 21:10:54" itemprop="dateCreated datePublished" datetime="2024-01-13T21:10:54+08:00">2024-01-13</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>Spring基础</h1>
<ul>
<li>
<p>Spring是一个用于解决企业应用<strong>开发</strong>的复杂性而创建的轻量级<strong>Java框架</strong>。</p>
</li>
<li>
<p>主要优势是其<strong>分层架构</strong>允许使用者选择使用哪一个组件，用基本的JavaBean完成以前只可能用EJB（Enterprise Java Bean）完成的事情。</p>
</li>
<li>
<p>核心：<strong>控制反转（IOC）<strong>和</strong>面向切面（AOP）</strong>。</p>
</li>
</ul>
<h3 id="控制反转-Inversion-of-Control：">控制反转-Inversion of  Control：</h3>
<ul>
<li>
<p>一种设计模式，用以降低计算机代码的耦合度</p>
</li>
<li>
<p>功能：通过控制反转，对象在被创建的时候，由一个调控系统内所有对象的<strong>外界实体</strong>将其所依赖的对象的引用传递给它。（相当于资源统一由不使用资源的第三方管理，好像在配置文件实现，如果A、C依赖B，对象B有什么更改的话直接在配置文件改一个地方，就不用去所有A、C类中再去一一更改了）</p>
</li>
<li>
<p>好处：资源集中管理、降低使用资源双方的耦合性</p>
</li>
<li>
<p>常见方法：依赖注入、依赖查找</p>
<p><img src="../images/Spring%E6%A1%86%E6%9E%B6/v2-ee924f8693cff51785ad6637ac5b21c1_hd.jpg" alt=""></p>
</li>
</ul>
<p><strong>依赖倒置原则：</strong></p>
<p>设计一辆汽车，考虑这两种设计方式：</p>
<ol>
<li>先设计轮子，根据轮子设计底盘，根据底盘设计车身，根据车身设计汽车。</li>
<li>先设计汽车，根据汽车设计车身，根据车身设计底盘，根据底盘设计轮子。</li>
</ol>
<p>方式1的可维护性极低，如果轮子的设计改变了，则所有都得重新设计一遍，即“牵一发而动全局”，方式2就只需要改轮子。</p>
<p>方式一：</p>
<table>
	<tr>
        <td><img src="https://pic3.zhimg.com/80/v2-8ec294de7d0f9013788e3fb5c76069ef_hd.jpg" ></td>
        <td><img src="https://pic1.zhimg.com/80/v2-82e0c12a1b26f7979ed9241e169affda_hd.jpg" ></td>
    </tr>
</table>
<p>方式二：（这个实现方法就是依赖注入）</p>
<table>
    <tr>
        <td><img src="https://pic1.zhimg.com/80/v2-c920a0540ce0651003a5326f6ef9891d_hd.jpg"></td>
        <td><img src="https://pic4.zhimg.com/80/v2-99ad2cd809fcb86dd791ff7f65fb1779_hd.jpg"></td>
    </tr>
</table>
<p>总结来说，依赖倒置原则就是高层建筑决定需要什么，由底层去实现需求，高层不用管底层是怎么实现的。</p>
<img src="../images/Spring框架/v2-c845802f9187953ed576e0555f76da42_hd.jpg" alt="img" style="zoom:80%;" />
<p>因为使用依赖注入，初始化的过程需要写大量的new，要将依赖的对象都初始化，而IoC Container就是帮助我们省掉这个过程，我们只需要维护一个Configuration，且创建Car实例时也不需要关注底层细节。</p>
<p><img src="../images/Spring%E6%A1%86%E6%9E%B6/v2-24a96669241e81439c636e83976ba152_hd.jpg" alt=""><br>
$$<br>
\Downarrow<br>
$$<br>
<img src="../images/Spring%E6%A1%86%E6%9E%B6/v2-5ca61395f37cef73c7bbe7808f9ea219_hd.jpg" alt=""></p>
<p>这个架构要求你在写class的时候需要写相应的Config文件，所以你要初始化很久以前的Service类的时候，前人都已经写好了Config文件，你直接在需要用的地方注入这个Service就可以了</p>
<h3 id="面向切面—Aspect-Orientied-Programming">面向切面—Aspect Orientied Programming</h3>
<ul>
<li>通过预编译方式和运行期间动态代理实现程序功能的统一维护的一种技术，这也是一种设计模式。</li>
<li>功能：实现程序功能统一，可以对业务逻辑的各个部分进行隔离，使它们的耦合度降低</li>
<li>常用方法：预编译、运行期间动态代理</li>
</ul>
<p>OOP(Object Oriented Programming)：面向对象编程，引入封装、继承、多态建立对象层次结构。允许开发者定义纵向关系，但不适合定义横向关系。</p>
<p>AOP：将那些影响多个类的公共行为（即与业务无关）封装起来，目的是减少系统重复代码，降低模块之间的耦合性，有利于未来可操作性和可维护性。</p>
<p>AOP将软件系统分为两个部分：核心关注点和横切关注点。</p>
<p>通过<strong>动态代理</strong>，可以在指定位置执行对应流程。这样可以将一些横向的功能抽离出来形成一个独立的模块，然后在指定位置插入这些功能。这样的思想就是<strong>面向切面编程</strong>，即<strong>AOP</strong>。</p>
<ul>
<li>Target Object:目标类，需要被代理的类。例如：UserServiceImpl;</li>
<li>Join Point:连接点，所谓的连接点是指那些可能被拦截到的方法。例如：getargs();</li>
<li>Pointcut:切入点，已经被增强的连接点。例如：addUser();</li>
<li>Advice:增强/通知，增强代码。例如：afer、before等；</li>
<li>Weaving:织入，是指把增强advice应用到目标对象target来创建新的代理对象proxy的过程；</li>
<li>Proxy:代理类，通知+切入点(由动态代理自动生成的类)；</li>
<li>Aspect:切面，是切入点pointcut和通知advice的结合。</li>
</ul>
<p>Reference：</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/hht006158/article/details/80181207?spm=1001.2101.3001.6650.1&amp;utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-1-80181207-blog-124129130.pc_relevant_default&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-1-80181207-blog-124129130.pc_relevant_default&amp;utm_relevant_index=2">什么是spring框架？spring特点与好处,使用spring框架的好处是什么</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_57452280/article/details/119700637"> Spring框架专题(六)-Spring框架之AOP_三舞组合的博客-CSDN博客_spring框架的aop</a></p>
<h2 id="Spring容器">Spring容器</h2>
<p>bean对象的实例化与装配有两种，BeanFactory和ApplicationContext，ApplicationContext时BeanFactory的一个子接口。</p>
<p>BeanFactory：延迟加载，第一次用的时候再加载。第一次调用getBean()，才去读配置信息，生成某个bean的实例。</p>
<p>ApplicationContext: 初始化的时候就加载，初始化时读取配置信息，生成所有bean的实例。大多情况用这个。</p>
<p><img src="../images/Spring%E6%A1%86%E6%9E%B6/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdGlhbnhpYW5nX2thb2xh,size_16,color_FFFFFF,t_70.png" alt=""></p>
<h3 id="配置元数据">配置元数据</h3>
<p>元数据三种格式：xml、Java注解和Java代码</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;BookServiceId&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.tyshawn.service.impl.BookServiceImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;bookDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;BookDaoId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;BookDaoId&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.tyshawn.dao.Impl.BookDaoImpl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ApplicationContext有两个实现类用来加载XML格式的元数据：</p>
<ul>
<li>ClassPathXmlApplicationContext：基于类路径</li>
<li>FileSystemXmlApplicationContext：基于文件路径</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;classpath:spring/bean.xml&quot;</span>);</span><br><span class="line"><span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileSystemXmlApplicationContext</span>(<span class="string">&quot;D:\\springtest\\src\\main\\resources\\spring\\bean.xml&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>ApplicationContext的实现类AnnotationConfigApplicationContext用来加载Java注解格式的元数据</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &quot;org.tyshawn&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppConfig</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">AnnotationConfigApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(AppConfig.class);</span><br></pre></td></tr></table></figure>
<h3 id="IoC">IoC</h3>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://xyat98.github.io/2024/01/13/hexo_usage/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/IMG_9443.JPG">
      <meta itemprop="name" content="y-n">
      <meta itemprop="description" content="Faith is a substance of things hoped for, the evidence of things not seen.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Liu">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/01/13/hexo_usage/" class="post-title-link" itemprop="url">Hello World</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-01-13 20:24:05" itemprop="dateCreated datePublished" datetime="2024-01-13T20:24:05+08:00">2024-01-13</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Windows-use-Hexo">Windows use Hexo</h2>
<p>windows在使用hexo时，会有安全限制， 报如下的错：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo : 无法加载文件 D:\32689\AppData\Roaming\npm\hexo.ps1，因为在此系统上禁止运行脚本。有关详细信息，请参阅 https:/go.m icrosoft.com/fwlink/?LinkID=135170 中的 about_Execution_Policies。                                                      所在位置 行:1 字符: 1                                                                                                   + hexo                                                                                                                  + ~~~~                                                                                                                      + CategoryInfo          : SecurityError: (:) []，PSSecurityException                                                    + FullyQualifiedErrorId : UnauthorizedAccess     </span><br></pre></td></tr></table></figure>
<p>需要以管理员身份运行powershell， 然后执行：以修改执行策略<br>
<code> Set-ExecutionPolicy RemoteSigned</code></p>
<h2 id="Quick-Start">Quick Start</h2>
<h3 id="Create-a-new-post">Create a new post</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server">Run server</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server | hexo s</span><br><span class="line">$ hexo s --debug  <span class="comment"># start server in debug mode, can observe any exception</span></span><br></pre></td></tr></table></figure>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files">Generate static files</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites">Deploy to remote sites</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
<h1>asset_path</h1>
<h2 id="image-path">image_path</h2>
<p>直接设置scode的markdown的编辑插件， 将从clipboard拷贝的图片插入到markdown文件中时的路径设置为…/images/filename/xxx.png即可</p>
<h1>render</h1>
<p>在_config.yml中配置markwodn即可， 需要渲染什么东西添加上对应的渲染插件即可</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">markdown:</span></span><br><span class="line">  <span class="attr">preset:</span> <span class="string">&#x27;default&#x27;</span></span><br><span class="line">  <span class="attr">render:</span></span><br><span class="line">    <span class="attr">html:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">xhtmlOut:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">langPrefix:</span> <span class="string">&#x27;language-&#x27;</span></span><br><span class="line">    <span class="attr">breaks:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">linkify:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">typographer:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">quotes:</span> <span class="string">&#x27;“”‘’&#x27;</span></span><br><span class="line">  <span class="attr">enable_rules:</span></span><br><span class="line">  <span class="attr">disable_rules:</span></span><br><span class="line">  <span class="attr">plugins:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">markdown-it-abbr</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">markdown-it-attrs</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">markdown-it-emoji</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">markdown-it-task-checkbox</span></span><br><span class="line">  <span class="attr">anchors:</span></span><br><span class="line">    <span class="attr">level:</span> <span class="number">2</span></span><br><span class="line">    <span class="attr">collisionSuffix:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="attr">permalink:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">permalinkClass:</span> <span class="string">&#x27;header-anchor&#x27;</span></span><br><span class="line">    <span class="attr">permalinkSide:</span> <span class="string">&#x27;left&#x27;</span></span><br><span class="line">    <span class="attr">permalinkSymbol:</span> <span class="string">&#x27;¶&#x27;</span></span><br><span class="line">    <span class="attr">case:</span> <span class="number">0</span></span><br><span class="line">    <span class="attr">separator:</span> <span class="string">&#x27;-&#x27;</span></span><br><span class="line">  <span class="attr">images:</span></span><br><span class="line">    <span class="attr">lazyload:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">prepend_root:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">post_asset:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">inline:</span> <span class="literal">false</span>  <span class="comment"># https://markdown-it.github.io/markdown-it/#MarkdownIt.renderInline</span></span><br></pre></td></tr></table></figure>
<h1>end</h1>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://xyat98.github.io/2024/01/13/%E6%B8%90%E6%9E%84%E5%AE%9E%E8%B7%B5-md/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/IMG_9443.JPG">
      <meta itemprop="name" content="y-n">
      <meta itemprop="description" content="Faith is a substance of things hoped for, the evidence of things not seen.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Liu">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/01/13/%E6%B8%90%E6%9E%84%E5%AE%9E%E8%B7%B5-md/" class="post-title-link" itemprop="url">渐构实践.md</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2024-01-13 14:53:23 / 修改时间：20:24:05" itemprop="dateCreated datePublished" datetime="2024-01-13T14:53:23+08:00">2024-01-13</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>实例1： 正外部性</h1>
<ul>
<li>「具象层、抽象层」</li>
<li>「对象、内涵、概念、判别模型、外延」</li>
<li>「抽象（动词）、判别（动词）、具象（动词）」</li>
<li>「已见、未见」</li>
<li>「一个、一类」</li>
</ul>
<p>1 具象层、抽象层</p>
<p>抽象层： 正外部性/非正外部性的集合</p>
<p>具象层：所有的经济活动集合</p>
<p>2 对象、内涵、概念、判别模型、外延</p>
<p>对象：是所有需要被认识的经济行为？</p>
<p>内涵：为其他经济体产生额外经济利益/正向收益， 并且受益者不付出任何代价的经济活动</p>
<p>概念：正外部性、非正外部性</p>
<p>判别模型：一个经济活动【能对其他经济体产生正向收益/正向经济利益， 且受益者不付出任何代价】属于正外部性。</p>
<p>外延：所有具有【正外部性内涵】的经济活动</p>
<p>3 抽象（动词)、判别、具象（动词)</p>
<p>抽象： 从所有已知正外部性经济活动中抽取出 【能对其他经济体产生正向收益/正向经济利益， 且受益者不付出任何代价】的共有属性，剔除掉他们的差异属性。</p>
<p>具象： 根据正外部性概念，举例说出出满足正外部性内涵的行为</p>
<p>判别： 判别一个经济活动是否具有正外部性</p>
<p>4 已见、未见</p>
<p>已见：教育、研发、扶贫、环境保护、自然保护、养蜂</p>
<p>未见：过渡开采</p>
<p>5 一个、一类</p>
<p>一个：教育、研发、扶贫、环境保护、自然保护、养蜂各自是一个对象，总共六个对象</p>
<p>一类：正外部性的外延是一类</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://xyat98.github.io/2024/01/13/%E7%AE%97%E6%B3%95%E5%B0%8F%E8%AE%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/IMG_9443.JPG">
      <meta itemprop="name" content="y-n">
      <meta itemprop="description" content="Faith is a substance of things hoped for, the evidence of things not seen.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Liu">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/01/13/%E7%AE%97%E6%B3%95%E5%B0%8F%E8%AE%A1/" class="post-title-link" itemprop="url">算法小计.md</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2024-01-13 14:53:23 / 修改时间：20:24:05" itemprop="dateCreated datePublished" datetime="2024-01-13T14:53:23+08:00">2024-01-13</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>数据结构</h1>
<h2 id="1-数组-单链表-字符串">1. 数组/单链表/字符串</h2>
<h3 id="1-1-二分法">1.1 二分法</h3>
<blockquote>
<p><strong>&lt;力扣34&gt;练习</strong></p>
<p>求左右边界时：</p>
<ol>
<li>确定每次的范围</li>
<li>确定==时，走哪条路</li>
<li>最后返回结果时，判断
<ul>
<li>什么时候返回（right==left or left==right+1）</li>
<li>分别讨论target在其中/不在其中的情况，会停在哪里（只有这四种！！）
<ul>
<li>在其中</li>
<li>小于其中所有数</li>
<li>大于所有数</li>
<li>大小处在数组之中的某个位置，但不存在于数组中</li>
</ul>
</li>
</ul>
</li>
</ol>
</blockquote>
<ul>
<li>
<p>普通的二分：nums[i]随i的变化而单调变化，即有序的数组</p>
<ul>
<li>求nums[i]==target</li>
<li>求左右边界（<strong>注意返回值是否有效或者越界</strong>）</li>
</ul>
</li>
<li>
<p>扩展的二分：f(x)=y, 因变量y随自变量x的变化而单调变化，甚至可以求两个单调函数一起作用的情况（如：一个递增，一个递减，求相交点这种）</p>
</li>
</ul>
<h3 id="1-2-快慢指针-左右指针">1.2 快慢指针/左右指针</h3>
<p>常用在单链表中，可以用于求解单链表中是否有环 、一次遍历判断单链表中倒数第k个节点、一次遍历找到单链表的中间节点</p>
<p>数组：原地处理数组</p>
<p>注：fast和slow指针都从指向head开始出发</p>
<h3 id="1-3-滑动窗口">1.3 滑动窗口</h3>
<p>通常是在一个子数组或子串上进行操作，即滑动窗口，而不需要在整个数组或字符串上进行操作，降低了问题的复杂性。</p>
<p>用滑动窗口注意三个问题：</p>
<ul>
<li>什么时候扩大窗口</li>
<li>什么时候收缩窗口</li>
<li>什么时候返回值？</li>
</ul>
<h3 id="1-4-回文字符串">1.4 回文字符串</h3>
<p>暴力、马拉车算法</p>
<h3 id="1-5-最长回文子序列-区别于最长回文子串">1.5 最长回文子序列/区别于最长回文子串</h3>
<p>给定一个字符串，找到其中最长的回文子序列，并返回该序列的长度。</p>
<p>本题中子序列字符串任意位置删除k（len(s)&gt;=k&gt;=0）个字符后留下的子串。</p>
<p>dp[i][j] 表示从 [i,j] 的最长回文子序列长度</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(s.charAt(i)==s.charAt(j))&#123;</span><br><span class="line">    dp[i][j]=dp[i+<span class="number">1</span>][j-<span class="number">1</span>]+<span class="number">2</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    dp[i][j]=Math.max(dp[i+<span class="number">1</span>][j],dp[i][j-<span class="number">1</span>]);</span><br><span class="line">    <span class="comment">//因为i！=j，因此i和j对此无增益，所以要么dp[i][j]=dp[i+1][j],要么dp[i][j]=dp[i][j-1];</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1-6-前缀和">1.6 前缀和</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=nums.length;i++) </span><br><span class="line">    <span class="comment">//sum[i]代表(0~i-1的nums的和)</span></span><br><span class="line">    sum[i]=sum[i-<span class="number">1</span>]+nums[i-<span class="number">1</span>];</span><br></pre></td></tr></table></figure>
<h3 id="1-7-差分数组">1.7 差分数组</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">differ[<span class="number">0</span>]=nums[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;nums.length;i++)</span><br><span class="line">    differ[i]=nums[i]-nums[i-<span class="number">1</span>];</span><br><span class="line"><span class="comment">//从differ数组倒推nums，</span></span><br><span class="line"><span class="comment">//nums[i]=differ[i]+nums[i-1]</span></span><br><span class="line"><span class="comment">//nums[i]=differ[i]+differ[i-1]+...+differ[0];</span></span><br><span class="line"><span class="comment">//改变differ[i]就是对nums[i]到nums[len-1]进行改变</span></span><br></pre></td></tr></table></figure>
<h3 id="1-8-单调栈-单调队列">1.8 单调栈/单调队列</h3>
<h2 id="2-二叉树">2. 二叉树</h2>
<h3 id="前序">前序</h3>
<h3 id="中序">中序</h3>
<h3 id="后序">后序</h3>
<h3 id="bfs">bfs</h3>
<h3 id="dfs">dfs</h3>
<h3 id="构造二叉树">构造二叉树</h3>
<p>从前序+中序构造，从后序和中序构造</p>
<h3 id="序列化">序列化</h3>
<h2 id="3-图">3. 图</h2>
<h3 id="bfs-2">bfs</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">bfs</span><span class="params">(Node root)</span>&#123;</span><br><span class="line">  Queue&lt;Node&gt; q=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;Node&gt;();</span><br><span class="line">  Set&lt;Node&gt; visited;</span><br><span class="line">  <span class="type">int</span> step=<span class="number">0</span>;<span class="comment">//扩散的层级数</span></span><br><span class="line">  q.offer(root);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">while</span>(!q.isEmpty())&#123;</span><br><span class="line">    <span class="type">int</span> sz=q.size();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;sz;i++)&#123;<span class="comment">//这一层所有元素</span></span><br><span class="line">      Node r=q.poll();</span><br><span class="line">      visited.add(r);</span><br><span class="line">      <span class="keyword">for</span>(Node child:getChilds(r))&#123;</span><br><span class="line">        <span class="keyword">if</span>(visited.contains(child)) <span class="keyword">continue</span>;</span><br><span class="line">        q.offer(child);</span><br><span class="line">      &#125; </span><br><span class="line">    &#125;</span><br><span class="line">    step++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>双向bfs</p>
<p>从起点和终点开始设置两个queue，每次要visit的时候判断一下当前要访问的节点是否存在于另一个方向的queue中，如果存在就说明双向bfs交汇了。</p>
<h3 id="dfs-2">dfs</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">boolean</span>[] visited;</span><br><span class="line">List&lt;Integer&gt; onPath;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">traverse</span><span class="params">(<span class="type">int</span> root)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(visited[root]) <span class="keyword">return</span>;</span><br><span class="line">  visited[root]=<span class="literal">true</span>;</span><br><span class="line">  onPath.add(root);</span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> neighbor:getNeighbors(root))&#123;</span><br><span class="line">    traverse(neighbor);</span><br><span class="line">  &#125;</span><br><span class="line">  onPath.delete(root);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="拓扑排序">拓扑排序</h3>
<h3 id="二分图的判定（染色法）">二分图的判定（染色法）</h3>
<h3 id="最小生成树">最小生成树</h3>
<p>prim算法：优先队列+visited数组（保证无环）</p>
<p>Kruskal算法：优先队列+并查集（并查集保证无环）</p>
<h3 id="单源最短路径">单源最短路径</h3>
<p>Dijkstra算法：优先队列+最小距离数组+邻接表</p>
<h1>并查集</h1>
<h1>设计数据结构（LRU/LFU）</h1>
<p>Least Recently Used</p>
<p>Least Frequently Used</p>
<ul>
<li>复杂的先画一下流程图；</li>
<li>把公共的流程抽出来写成一个函数；</li>
<li>每个程序需要确定哪些全局变量会变化</li>
</ul>
<h1>一些有用的函数/技巧</h1>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">IntStream.range(<span class="number">0</span>,n).toArray()；<span class="comment">//返回[0,1,2,...,n-1]的int[]数组</span></span><br><span class="line">IntStream.range(<span class="number">0</span>,n).boxed().toArray(Integer[]::<span class="keyword">new</span>);<span class="comment">//返回[0,1,2,...,n-1]的Integer[]数组</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//排序一个数组但不改变其本来顺序，假如要排序nums但不能改变nums的本来顺序</span></span><br><span class="line"><span class="keyword">var</span> sort=IntStream.range(<span class="number">0</span>,n).boxed().toArray(Integer[]::<span class="keyword">new</span>);</span><br><span class="line"><span class="type">int</span>[] nums=<span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">Arrays.sort(sort,(a,b)-&gt;nums[a]-nums[b]);<span class="comment">//这个方法执行之后，sort中就是nums的数据从小到大的索引</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//复制一个数组</span></span><br><span class="line">Arrays.copyOf(T[] original,<span class="type">int</span> len);</span><br><span class="line">Arrays.copyOfRange(T[] original,<span class="type">int</span> from,<span class="type">int</span> to);</span><br></pre></td></tr></table></figure>
<h1>1. P问题、NP问题</h1>
<h2 id="1-1-定义：">1.1 定义：</h2>
<p><strong>P问题</strong>(polynominal，多项式)：存在多项式时间算法的问题</p>
<p><strong>NP问题</strong>(Nondeterministic polynominal，非确定性多项式)：能在多项式时间内验证得出一个正确解的问题（这里是<strong>不知道</strong>是否存在一个多项式时间的算法，每次都能解决他，而不是<strong>不存在</strong>）</p>
<blockquote>
<p>著名的NP类问题：旅行家推销问题(TSP)。即有一个推销员，要到n个城市推销商品，他要找出一个包含所有n个城市的环路，这个环路路径小于a。我们知道这个问题如果单纯的用枚举法来列举的话会有(n-1)! 种，已经不是多项式时间的算法了，(注：阶乘算法比多项式的复杂)。那怎么办呢？我们可以用猜的，假设我人品好，猜几次就猜中了一条小于长度a的路径，我画画画画，好的，我得到了一条路径小于a的环路，问题解决了，皆大欢喜。可是，我不可能每次都猜的那么准，也许我要猜完所有种呢？所以我们说，这是一个NP类问题。也就是，我们能在多项式的时间内验证并得出问题的正确解，可是我们却不知道该问题是否存在一个多项式时间的算法，每次都能解决他(注意，这里是不知道，不是不存在)。</p>
<p>所以这就引出了这类讨论的一个千年问题：是否 NP类问题=P类问题？</p>
<p>圣战的结果是，有的存在，有的不存在。=_=</p>
</blockquote>
<h2 id="1-2-待解决">1.2  待解决</h2>
<p>怎么证明一个问题是NP问题呢？（我好像有点明白了，只要我能在多项式时间内解决问题，哪怕瞎猫碰上死耗子，下一次同样的问题我不一定能解决，也就是说没有一个通用的”方法“，只是上一次凑巧解决了，如上面的例子，我凑巧瞎画给画出来了，但通用的”解决方法“并没有出来）</p>
<h2 id="1-3-NPC">1.3 NPC</h2>
<p>non-deterministic polynomial complete problem<br>
$$<br>
No：1,2,…k… n\<br>
A: …a_i,…a_j…\<br>
O: …a_j,…a_i…\<br>
O’: …a_i,…a_j…\<br>
$$</p>
<p>$$<br>
No：1,2,…k… n\<br>
A: …a_i,…a_j…\<br>
O: …a_j,…a_i…\</p>
<p>\Delta=Distance(O)-Distance(O’)=\<br>
d_{11}+d_{12}+d_{13}+d_{14}\<br>
-d_{21}-d_{22}-d_{23}-d_{24}<br>
$$</p>
<h1>并查集（union-find）</h1>
<p>用途：用于判断图中两个点是否连通（即判断“远房亲戚”）</p>
<p>只需要实现两个函数（find和merge）</p>
<p>并查集在构建图的同时标记出了“哪个人”属于“哪个团伙”</p>
<img src="D:\桌面\笔记\算法小计_image\image-20220207174052104.png" alt="image-20220207174052104" style="zoom: 50%;" />
<p>对于一个有n个节点，m条边的图来说（不带环的图），需要一个数组f[n]来存储各节点的团伙代表人。</p>
<ol>
<li>
<p>初始化</p>
<p>初始化之前的状态即是各个节点都没有边，则f[n]=n;各节点的团伙代表人是自己</p>
<img src="D:\桌面\笔记\算法小计_image\image-20220207175015189.png" alt="image-20220207175015189" style="zoom:33%;" />
<pre><code> 2. 合并团伙
</code></pre>
<p>假如a、b有一条边，f[a的代表人]=（b的代表人）</p>
<p>eg：最开始1、3有一条边，令f[3]=f[1]=1;</p>
<p>3、4有一条边，令f[f[3]]=f[4] ==&gt;f[1]=4;</p>
  <img src="D:\桌面\笔记\算法小计_image\image-20220207175719117.png" alt="image-20220207175719117" style="zoom:33%;" />
<pre><code> 3. 查找团伙代表人，直接团伙代表人满足f[a]=a，则a是团伙代表人。
</code></pre>
<p>eg：1、3、4的团伙代表人是4</p>
<p>合并和查找的时间复杂度为O(h)。h是树的高度</p>
<p>eg：</p>
  <img src="D:\桌面\笔记\算法小计_image\image-20220207180237471.png" alt="image-20220207180237471" style="zoom:50%;" />
  <img src="D:\桌面\笔记\算法小计_image\image-20220207180302650.png" alt="image-20220207180302650" style="zoom:50%;" />
</li>
</ol>
<h2 id="优化">优化</h2>
<blockquote>
<p>为了防止并查集退化为O(n)的时间复杂度</p>
</blockquote>
<p><img src="https://mmbiz.qpic.cn/sz_mmbiz_jpg/gibkIz0MVqdHbnHaPibsAQHPibgTF6OUYzMk8VCNRmTgQpV7xRobklibXTSaNn43OzVFpXfJzsaaDwLFWVkOkePhlA/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt=""></p>
<p><strong>1. 秩优化（平衡性优化）</strong></p>
<p>使小一点的树成为大一点的树的子树</p>
<p>这一步影响的是union算法</p>
<p><img src="https://mmbiz.qpic.cn/sz_mmbiz_jpg/gibkIz0MVqdHbnHaPibsAQHPibgTF6OUYzMEoaSbJlKUa0kHcvOLWvGsWtcFSgTULsiaXicib31fMnk6ic5dP16sq92tA/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt=""></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">union</span><span class="params">(<span class="type">int</span> p, <span class="type">int</span> q)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">rootP</span> <span class="operator">=</span> find(p);</span><br><span class="line">    <span class="type">int</span> <span class="variable">rootQ</span> <span class="operator">=</span> find(q);</span><br><span class="line">    <span class="keyword">if</span> (rootP == rootQ)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 小树接到大树下面，较平衡</span></span><br><span class="line">    <span class="keyword">if</span> (size[rootP] &gt; size[rootQ]) &#123;<span class="comment">//z</span></span><br><span class="line">        parent[rootQ] = rootP;</span><br><span class="line">        size[rootP] += size[rootQ];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        parent[rootP] = rootQ;</span><br><span class="line">        size[rootQ] += size[rootP];</span><br><span class="line">    &#125;</span><br><span class="line">    count--;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>2. 路径压缩</strong></p>
<p>压缩每一棵树的高度(影响的是find算法)</p>
<p>这一步是为了能在O(1)的时间找到某一结点的根节点</p>
<p><img src="https://mmbiz.qpic.cn/sz_mmbiz_gif/gibkIz0MVqdHbnHaPibsAQHPibgTF6OUYzMrQ92pFbd4DUeTpMwUqpl7dm2aiaefC76I9blH9yD4v7GAGY3pKBFglQ/640?wx_fmt=gif&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt=""></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="type">int</span> <span class="title function_">find</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (parent[x] != x) &#123;</span><br><span class="line">        <span class="comment">// 进行路径压缩</span></span><br><span class="line">        parent[x] = parent[parent[x]];</span><br><span class="line">        x = parent[x];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>动态规划</h1>
<blockquote>
<p>解决一个问题需要许多步骤，这些步骤做法相似且下一个步骤依赖于上一个步骤的结果，所以需要一个存储空间。</p>
</blockquote>
<p>关键（steps-递推 ）：</p>
<ul>
<li>确定存储空间到底存放当前的什么状态</li>
<li>确定 状态转移方程（注意计算顺序，考虑更新后的数对其他有没有影响）</li>
<li>确定需要初始化的状态（以及处理边界）</li>
</ul>
<p><strong>容易出错的地方是在</strong>：dp定义、base case、处理顺序上</p>
<p>条件：</p>
<ul>
<li>
<p>无后效性：前面的各种决策结果均由这个状态表示，在考虑后面的决策过程没有任何区别。</p>
<p>eg：leetcode地下城与勇士-173这个题<br>
<img src="%E7%AE%97%E6%B3%95%E5%B0%8F%E8%AE%A1.assets/image-20220523152647300.png" alt=""></p>
<p>从(0,0)到(1,2)有两条路径，根据不同的路径走到（1，2），再继续从（1，2）往下走是不一样的结果。这就是不满足“无后效性”。</p>
</li>
</ul>
<p>分割类问题</p>
<p>子序列问题</p>
<p>背包问题</p>
<p>字符串编辑问题</p>
<p>股票问题</p>
<h1>分治法</h1>
<h1>排序</h1>
<h2 id="归并排序">归并排序</h2>
<p><strong>方法：</strong></p>
<p><img src="D:%5C%E6%A1%8C%E9%9D%A2%5C%E7%AC%94%E8%AE%B0%5C%E7%AE%97%E6%B3%95%E5%B0%8F%E8%AE%A1_image%5Cimage-20220127090820735.png" alt=""></p>
<p><strong>时间复杂度：</strong>$O(nlog_2{n})$</p>
<p>高度为$log_2{n}$, 每一层排序所用时间为$O(n)$</p>
<p><strong>空间复杂度：</strong> 对于链表来说，每一个节点可以单独拎出来，不需要额外的空间。对于数组来说，不太适用，空间需要$O(nlog_2{n})$,每一层的情况都需要保存。</p>
<p><strong>归并排序可以用来求逆序对</strong>:</p>
<p>合并阶段 本质上是 合并两个排序数组 的过程，而每当遇到 左子数组当前元素 &gt; 右子数组当前元素 时，意味着 「左子数组当前元素 至 末尾元素」 与 「右子数组当前元素」 构成了若干 「逆序对」</p>
<p>作者：jyd<br>
链接：<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/shu-zu-zhong-de-ni-xu-dui-lcof/solution/jian-zhi-offer-51-shu-zu-zhong-de-ni-xu-pvn2h/">https://leetcode-cn.com/problems/shu-zu-zhong-de-ni-xu-dui-lcof/solution/jian-zhi-offer-51-shu-zu-zhong-de-ni-xu-pvn2h/</a><br>
来源：力扣（LeetCode）<br>
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>
<h2 id="桶排序">桶排序</h2>
<blockquote>
<p>就是将待排序的数放入不同的桶中，桶内单独排序，再一起排（最好桶内元素数量相当）</p>
<p>桶排序最好的时间复杂度是）线性O(n)</p>
</blockquote>
<h2 id="基数排序">基数排序</h2>
<blockquote>
<p>对待排序的数组，</p>
<ol>
<li>先求出最大位数max</li>
<li>将所有元素的位数补齐至max（高位补0）</li>
<li>按照位数上的值进行排序（共进行max次，可由低到高，也可由高到低）</li>
</ol>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">radixSort</span><span class="params">()</span>&#123;</span><br><span class="line">  Scanner in=<span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">  System.out.print(<span class="string">&quot;请输入数组长度：&quot;</span>);</span><br><span class="line">  <span class="type">int</span> n=in.nextInt();</span><br><span class="line">  System.out.println(<span class="string">&quot;请输入数组：&quot;</span>);</span><br><span class="line">  <span class="type">int</span>[] data=<span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">  LinkedList&lt;Integer&gt;[] bucket = <span class="keyword">new</span> <span class="title class_">LinkedList</span>[<span class="number">10</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++) bucket[i] = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> v=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.判断最大位数</span></span><br><span class="line">        <span class="type">int</span> max=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++) &#123;</span><br><span class="line">            data[i]=in.nextInt();</span><br><span class="line">            max=Math.max(max,getLen(data[i]));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2. 按照各个位数进行排序</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;max;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> e:data)&#123;</span><br><span class="line">                bucket[(e/v)%<span class="number">10</span>].offerLast(e);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//将每一轮的结果写回到data中</span></span><br><span class="line">            <span class="type">int</span> x=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> k=<span class="number">0</span>;k&lt;<span class="number">10</span>;k++)&#123;</span><br><span class="line">                <span class="keyword">while</span>(!bucket[k].isEmpty())&#123;</span><br><span class="line">                    data[x++]=bucket[k].pollFirst();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            v *= <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getLen</span><span class="params">(<span class="type">int</span> n)</span>&#123;</span><br><span class="line">        <span class="type">int</span> ans=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (n!=<span class="number">0</span>)&#123;</span><br><span class="line">            ans++;</span><br><span class="line">            n=n/<span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1>数学问题</h1>
<h2 id="1-欧几里得算法">1. 欧几里得算法</h2>
<blockquote>
<p>原理：两个数的最大公约数（gcd-greatest common divisor）也是其中较小的数和他们的余数的最大公约数</p>
</blockquote>
<p>$$<br>
\begin{aligned}<br>
&amp; a=kb+r\<br>
&amp; r=a-kb\<br>
&amp; \because d|a,d|b; \therefore d|r;(|整除)<br>
\end{aligned}<br>
$$</p>
<p>算法：<br>
$$<br>
\begin{aligned}<br>
&amp; a_1\div a_2=k_1 \ldots a_3\<br>
&amp; a_2\div a_3=k_2 \ldots a_4\<br>
&amp; \vdots\<br>
&amp; a_{n-1}\div a_{n}=k_{n-1}\<br>
&amp; 直到a_{n}==0<br>
\end{aligned}<br>
$$<br>
扩展欧几里得：<br>
$$<br>
\begin{aligned}<br>
&amp; \exist k_1a+k_2b=gcd(a,b)\<br>
&amp; a’=b,b’=a % b\<br>
&amp; xa’+yb’=gcd(a’,b’)=gcd(a,b)\<br>
&amp; xb+y(a-(a/b)b)=gdc(a,b)\<br>
&amp; ya+(x-(a/b))b=gcd(a,b)\<br>
&amp; k_1=y,k_2=x-a/b<br>
\end{aligned}<br>
$$</p>
<h2 id="2-埃拉托斯特尼筛法">2. 埃拉托斯特尼筛法</h2>
<p>用于判断一个整数是否是质数的方法，且可以在判断一个整数n时，同时判断所有小于n的整数</p>
<p>原理：从1到n遍历，假设当前遍历到m，则把所有小于n的、且是m的倍数的整数标为和数，遍历完成之后，没有被标的即为质数。</p>
<h2 id="3-Fisher-Yates洗牌算法">3.Fisher-Yates洗牌算法</h2>
<p>作用是生成一个有限集合的随机排列</p>
<p>随机获取一个数的算法</p>
<p><img src="https://images0.cnblogs.com/blog2015/734743/201505/071802188601847.png" alt=""></p>
<p>做法就是：</p>
<ol>
<li>第1次从1~n的候选集合随机选个数，拿出此数，并把它从候选集合剔除(候选集合n-1)。</li>
<li>第2次从1~n-1的候选集合随机选个数，拿出此数，并把它从候选集合剔除(候选集合n-2)。</li>
<li>第3次从1~n-2的候选集合随机选个数，拿出此数，并把它从候选集合剔除(候选集合n-3)。</li>
</ol>
<p>时间复杂度：$O(n^2)$</p>
<p>空间复杂度：$O(m)$</p>
<h2 id="4-二分查找">4. 二分查找</h2>
<p><strong>更新</strong>：</p>
<ol>
<li>
<p>mid=low+(high-low)/2;</p>
</li>
<li>
<p>如果是while(low&lt;high),那么搜索区间是[low,high),左闭右开。</p>
<p>初始化就应该：low=0;high=len; 结束时是low==high跳出循环。</p>
<p>如果是while(low&lt;=high)，搜索区间是[low,high]，闭区间；初始化：</p>
<p>low=0;high=len-1;结束时是low==high+1跳出循环。</p>
</li>
<li>
<p>搜索如果不是一个数的话而是某边界的话，例：搜索等于target的左/右边界，这时需要调整if(nums[mid]==target)的操作：</p>
<p>​		如果是要右边界，low还需要往前缩小范围；如果是要左边界，high还需要往后缩小范围</p>
</li>
<li>
<p>每次更新low或high时需要明确搜索区间。最后得到返回值时需要排除掉边界的情况。</p>
</li>
</ol>
<p>旧：</p>
<ol>
<li>算mid，mid=low+(high-low)/2</li>
<li>结束条件<code>while(low&lt;high)</code></li>
<li>返回low</li>
</ol>
<p>二分查找可能存在的问题：</p>
<ol>
<li>陷入死循环</li>
<li>mid值可能越界</li>
<li>返回值</li>
</ol>
<p><strong>例：</strong></p>
<p><img src="D:%5C%E6%A1%8C%E9%9D%A2%5C%E7%AC%94%E8%AE%B0%5C%E7%AE%97%E6%B3%95%E5%B0%8F%E8%AE%A1_image%5Cimage-20211211150842848.png" alt=""></p>
<p><strong>代码：</strong></p>
<p><img src="D:%5C%E6%A1%8C%E9%9D%A2%5C%E7%AC%94%E8%AE%B0%5C%E7%AE%97%E6%B3%95%E5%B0%8F%E8%AE%A1_image%5Cimage-20211211151421475.png" alt=""></p>
<p><strong>解题思路：</strong> 在[1,n]之间找出一个数m来，m在nums数组中是重复出现的。</p>
<p>即可以在[1,n]进行二分查找，每找到一个mid，统计一下nums中小于mid的数有多少个count，若count&gt;mid, 则target∈[1,mid]。</p>
<p>而在第12行，high=mid-1，看上去像是把target==mid的可能性排除在外了，但最后如果target==mid了，low会往high的方向收缩，最终low==high==target-1，返回值依然正确。</p>
<p>而如果12行写成high=mid，可能会陷入死循环。</p>
<h2 id="5-水库抽样算法">5. 水库抽样算法</h2>
<p>[source](<a target="_blank" rel="noopener" href="https://blog.csdn.net/sharelearner/article/details/10917075">(13条消息) 水库抽样问题_共同分享，一起成长-CSDN博客_水库抽样</a>)</p>
<p><strong>二次描述：</strong></p>
<p>假设已经从n个数里随机选出了k个数了，现在又来了一个数（总个数变为了n+1）。</p>
<p>现在要保证这k个数的被选择概率为$\frac{1}{n+1}$（现在是$\frac{1}{n}$）。</p>
<p>做法：</p>
<ul>
<li>int i=random(1,n+1);//从[1，n+1]随机选一个数,这个数满足被选概率为$\frac 1{n+1}$</li>
<li>前面已经被选择出的k个数被替换的比例要为$\frac{n}{n+1}$,因为要保证最终被选的概率为$\frac{1}{n+1}$。（$\frac{1}{n}*\frac{n}{n+1}=\frac 1{n+1}$）</li>
</ul>
<p>问题描述：</p>
<blockquote>
<p>输入：一组数据，大小未知，numbers[]</p>
<p>输出：这组数据的K个均匀抽取</p>
<p>要求：仅扫描一次</p>
<p>总体要求：从N个元素中随机的抽取k个元素，其中N无法确定，保证每个元素抽到的概率相同</p>
<p>现实意义：当内存无法加载全部数据时，如何从包含未知大小的数据流中随机选取k个数据，并且要保证每个数据被抽取到的概率相等。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=k+<span class="number">1</span>;i&lt;=N;i++)&#123;</span><br><span class="line">    <span class="type">int</span> m=random(<span class="number">1</span>,i+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span>(m&lt;=k)&#123;</span><br><span class="line">        swap the mth value and ith value</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>证明（数学归纳）：<br>
$$<br>
\begin{aligned}<br>
一、&amp;当i&lt;=k,每个元素被选中的概率P(i)=1;\<br>
二、&amp; 当i=k+1,numbers[i]以\frac{k}{k+1}的概率被选中去替换前k个数中的其中之一;\<br>
&amp; 需证明前k个被保留下来的概率也是\frac{k}{k+1};\<br>
&amp; 取1&lt;=j&lt;=k,numbers[j]被保留下来的概率：P(j)\<br>
&amp; =P(j|替换成功)<em>P(替换成功)+P(j|替换失败)<em>P(替换失败)\<br>
&amp; =\frac{k-1}{k}</em>\frac{k}{k+1}+1</em>\frac{1}{k+1}\<br>
&amp; =\frac{k}{k+1}\</p>
<p n+1="">三、&amp; 当i&gt;k+1时，计算前i-1个元素被选中的概率P(i)\<br>
&amp; 假设i=n时成立，证明i=n+1的情况\<br>
&amp; i=n成立，即i=n时，\forall 1&lt;=j&lt;=n都以\frac{k}{n}的概率出现在结果集中\<br>
&amp; 同理，\because P(n+1)=\frac{k}{n+1},后续只需证明前n个数中\forall 1&lt;=j&lt;=n，P(j):\<br>
&amp; =P(j|替换发生) * P(替换发生)+  P(j|替换没发生) * P(替换没发生)\<br>
&amp; = \frac{k}{n+1} * \frac{k}{n} * \frac{k-1}{k} +\frac{ k}{n} <em>\frac{n+1-k}{n+1}\<br>
&amp; = k</em>\frac{k-1}{n*(n+1)} + k*\frac{n+1-k}{n*(n+1)} \<br>
&amp; =  k*\frac{k-1+n+1-k}{n*(n+1)} \<br>
&amp; =  \frac{k}</p>
<p>\end{aligned}<br>
$$</p>
<h2 id="6-sum-i-1-n-a-i-x-最小值">6. $$\sum_{i=1}^{n}{|a_i-x|}最小值$$</h2>
<p>用到$$|x|+|y|&gt;=|x-y|$$来证明<br>
$$<br>
\begin{aligned}<br>
&amp; 求\sum_{i=1}^{n}{|a_i-x|}<em i="1">{min}\<br>
&amp; 将{a_n}列表按非降序排列为{b_n}={b_1,b_2,\dots,b_n};\<br>
\<br>
&amp; 1. 假设n=2*k+1\<br>
&amp; \sum</em>^{n}{|a_i-x|}<em i="1">{min}=\sum</em>^n{|b_i-x|}<em 2k+1="">{min}\<br>
&amp; =|b_1-x|+|b_2-x|+\dots+|b_n-x|\<br>
&amp; \geq|b_1-x-b</em>+x|+|b_2-x-b_{2k}+x|+\dots+|b_{k+1}-x|\<br>
&amp; =|b_1-b_{2k+1}|+|b_2-b_{2k}|+\dots+|b_k-b_{k+2}|+|b_{k+1}-x|\<br>
&amp; 当且仅当x=b_{k+1}时，等式成立\<br>
&amp; \sum_{i=1}^{n}{|a_i-x|}<em i="1">{min}=\sum</em>^n{|b_i-x|}<em 2k+1="">{min}=|b_1-b</em>|+|b_2-b_{2k}|+\dots+|b_k-b_{k+2}|\<br>
\<br>
&amp; 2.当x=2k时，b_k\leq x\geq b_{k+1}时，取得\sum_{i=1}^{n}{|a_i-x|}<em 2k+1="">{min}\<br>
&amp; =|b_1-b</em>|+|b_2-b_{2k}|+\dots+|b_k-b_{k+1}|<br>
\end{aligned}<br>
$$</p>
<h2 id="7-从rand-n-得到rank-m">7. 从rand(n)得到rank(m)</h2>
<p>一、当$n\geq{m}$，可以通过用$rand(n)$（一次或多次）得到$rand(m)$</p>
<p m="">​        证明：每个值被得到的概率是$\frac{1}{m}$<br>
$$<br>
\begin{aligned}<br>
&amp; 1.第一次k_1=rand(n),1\leq k_1\leq{m},P_1=\frac{1}{n}\<br>
&amp; 2.第二次1\leq k_2\leq{m},即第一次m&lt;k_1\leq{n},P_2=\frac{n-m}{n}<em>\frac{1}{n}\<br>
&amp; 3.第三次1\leq{k_3}\leq{m},P_3={(\frac{n-m}{n})}^2</em>\frac{1}{n}\<br>
&amp; \vdots\<br>
&amp; P=\lim_{N\rightarrow \infty}P_1+P_2+\cdots+P_N\<br>
&amp; \quad=\lim_{N\rightarrow \infty}\frac{1}{n}+\frac{n-m}{n}<em>\frac{1}{n}+(\frac{n-m}{n})^2</em>\frac{1}{n}+\cdots+(\frac{n-m}{n})^N*\frac{1}{n}\<br>
&amp; \quad=\lim_{N\rightarrow \infty}\frac{1}{n}*(\frac{1-(\frac{n-m}{n})^{N+1}}{1-(\frac{n-m}{n})})\<br>
&amp; \quad=\frac{1}</p>
<p>\end{aligned}<br>
$$<br>
还有一种特殊情况，若m是n的因数，rand(n)%m+1即可得到结果。</p>
<p>二、如果$n&lt;m$，需要想办法将利用$rand(n)$能描述一个比m大的范围[1,b]。（还需保证新描述的这个范围[1,b]中，每个数字出现的概率均等）<br>
$$<br>
\begin{aligned}<br>
&amp; (rand(n)-1)*a+rand(b) \rightarrow [1,m]\<br>
&amp; (rand(n)-1)\rightarrow [0,1,2,\cdots,n-1]\<br>
&amp; (rand(n)-1)*a\rightarrow [0,a,2a,\cdots,(n-1)a]\<br>
&amp; (rand(n)-1)*a+rand(b)\rightarrow \<br>
&amp; [0,a,2a,\cdots,(n-1)a]+[1,2,\cdots,b]\<br>
&amp; [(1,2,\cdots,b),(a+1,a+2,\cdots,(n-1)a+2),\cdots,((n-1)a+1,(n-1)a+2,\cdots,(n-1)a+b)]\<br>
&amp; 要保证等概率即满足b+1=a+1\Rightarrow b=a</p>
<p>\end{aligned}<br>
$$<br>
构造方法为：$(rand(n)-1)<em>a+rand(a)$得到的范围为[1,n</em>a]</p>
<h2 id="8-摩尔投票算法">8. 摩尔投票算法</h2>
<p>问题：在任意多的候选人（选票无序）中，选出获得票数最多的那个</p>
<p>问题链接：&lt;<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/majority-element/">169. 多数元素 - 力扣（LeetCode） (leetcode-cn.com)</a>&gt;</p>
<blockquote>
<p>给定一个大小为 n 的数组，找到其中的多数元素。多数元素是指在数组中出现次数 大于 ⌊ n/2 ⌋ 的元素。</p>
<p>你可以假设数组是非空的，并且给定的数组总是存在多数元素。</p>
<p>尝试设计时间复杂度为 O(n)、空间复杂度为 O(1) 的算法解决此问题。</p>
</blockquote>
<p>常见算法是对每个候选人所获选票进行统计，其时间复杂度为$O(n)$，空间复杂度为$O(n)$</p>
<p><strong>摩尔投票法：</strong></p>
<p>大厅里，有支持各种候选人的投票人，如果两个投票人遇上了并且所支持的候选人不一样，他俩就打一架并且同时倒下。</p>
<ul>
<li>如果，存在得了大多数选票的候选人（$&gt;{\lfloor{\frac{n}{2}\rfloor}}$）,那么最终大厅里剩下的那个投票人所支持的候选人一定是得了得了大多数选票的候选人；</li>
<li>如果，不知道是不是一定存在得了大多数选票的候选人，则最终剩下了一个投票人之后还需要统计一下该投票人所支持的候选人的选票。</li>
</ul>
<p>在场的有个叫onwaier的，他很聪明，他想到一个方法。他用他那犀利人目光扫一遍所有代表们的选票，在脑子记住两件事，当前的候选人的名字cand和他对应的计数k（并不是他的选票数）。起始时，k的值为0，看每个人的选票时，先想想现在k是否为0，如果是0就将cand更新为他将看到的候选人的名字并且将k的值更新为1。观察每个人选票的过程，如果这个人的选票与cand相同，则将k的值加1；否则，将k的值减1。最后的cand可能胜选，还需统计他的总选票数是否超过一半。（这里的cand相当于每次跟进行对比的投票人）</p>
<h2 id="9-环路检测（快慢指针）">9. 环路检测（快慢指针）</h2>
<p>问题：找循环</p>
<p>问题链接：&lt;<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/happy-number/">202. 快乐数 - 力扣（LeetCode） (leetcode-cn.com)</a>&gt;</p>
<blockquote>
<p>编写一个算法来判断一个数 n 是不是快乐数。</p>
<p>「快乐数」定义为：</p>
<p>对于一个正整数，每一次将该数替换为它每个位置上的数字的平方和。<br>
然后重复这个过程直到这个数变为1，也可能是 无限循环 但始终变不到 1。<br>
如果可以变为1，那么这个数就是快乐数</p>
</blockquote>
<p>判断是否有循环（数重复出现）不要用集合，可以用快慢指针</p>
<p>快指针：每次走两步</p>
<p>慢指针：每次走一步</p>
<p>若快指针==慢指针，则出现了循环。</p>
<p><strong>注：</strong> 快慢指针可能会在环的任意一点相遇，而环的起点才是重复点（或者说两个指针指向的点）。</p>
<h2 id="10-霍夫变换">10 . 霍夫变换</h2>
<h1>位运算</h1>
<p>科普：负数的二进制表示以其正码的补码形式表示（原码的反码＋1为其补码）</p>
<p><img src="D:%5C%E6%A1%8C%E9%9D%A2%5C%E7%AC%94%E8%AE%B0%5C%E7%AE%97%E6%B3%95%E5%B0%8F%E8%AE%A1_image%5Cimage-20211111195820537.png" alt=""></p>
<ol>
<li>n&amp;(n-1)：去除n的位级中最低的那一位，eg：101&amp;100 -&gt;100</li>
<li>n&amp;(-n)：可以得到n的位级中表示最低的那一位，11110100&amp;00001100 $\rightarrow$00000100</li>
<li>异或满足交换律、结合律</li>
</ol>
<h2 id="11-欧拉路径">11. 欧拉路径</h2>
<h2 id="1-汉明距离">1. 汉明距离</h2>
<p>两个整数之间的 <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%B1%89%E6%98%8E%E8%B7%9D%E7%A6%BB">汉明距离</a> 指的是这两个数字对应二进制位不同的位置的数目。</p>
<h2 id="2-判断2的次方-4的次方">2.判断2的次方/4的次方</h2>
<p>2的次方形如：n=000100 则n-1=000011</p>
<p>则n&amp;(n-1)==0即是2的次方</p>
<p>4在此基础上，1必须在奇数位，若n&amp;(0x55555555)（32位）!=0即为4的次方</p>
<h1>滑动窗口</h1>
<h1>前缀树</h1>
<p>Trie树（字典树）</p>
<p><img src="https://mmbiz.qpic.cn/sz_mmbiz_jpg/gibkIz0MVqdHbPt3iaYMdmqUMxEpq0F5AMqngdeqiaUYJ39ExKr5Sk4OyeTiap1KLDH38ib9WMYZTrMRamDIFVxgI9g/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt=""></p>
<p>树枝代表字符（即索引）</p>
<h1>线段树</h1>
<p>每个节点代表一个区间之和，叶节点代表一个数组元素的值</p>
<p>[例题](<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/range-sum-query-mutable/submissions/">307. 区域和检索 - 数组可修改 - 力扣（LeetCode） (leetcode-cn.com)</a>)： 给定数组，完成两类查询，一类是更新数组下标对应的值，另一类查询要求返回数组某个范围内元素的总和。要求两类查询的时间复杂度为$O(\log_2{n})$</p>
<p>原数组：1、3、5、7、9、11</p>
<p><img src="D:%5C%E6%A1%8C%E9%9D%A2%5C%E7%AC%94%E8%AE%B0%5C%E7%AE%97%E6%B3%95%E5%B0%8F%E8%AE%A1_image%5Cimage-20211216164709374.png" alt=""></p>
<p>两种方法：递归和非递归</p>
<ol>
<li>
<p>递归（从上往下）tree中根节点的index==1</p>
<p>递归tree的所需空间为$O(4*n)$ ,tree的高度为$h=\lceil \log_2{n} \rceil +1$</p>
<p>tree所需空间<br>
$$<br>
\begin{align}<br>
&amp;=2^0+2^1+2^2+\cdots+2^h\<br>
&amp;=\frac{1*(1-2^{h+1})}{1-2}\<br>
&amp;=2^{h+1}-1\<br>
&amp;&lt;=2<em>2^{\lceil \log_2{n} \rceil}=2</em>(n<em>2)=4</em>n<br>
\end{align}<br>
$$</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//递归版：所需空间为O(4*n)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NumArray</span> &#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="type">int</span>[] myNums;</span><br><span class="line">    <span class="type">int</span>[] tree;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">NumArray</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        n=nums.length;</span><br><span class="line">        myNums=<span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++) myNums[i]=nums[i];</span><br><span class="line">        tree=<span class="keyword">new</span> <span class="title class_">int</span>[n&lt;&lt;<span class="number">2</span>];</span><br><span class="line">        buildTree(<span class="number">1</span>,<span class="number">0</span>,n-<span class="number">1</span>);     </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">buildTree</span><span class="params">(<span class="type">int</span> node,<span class="type">int</span> start,<span class="type">int</span> end)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(start==end)&#123;</span><br><span class="line">            tree[node]=myNums[start];</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> mid=(start+end)/<span class="number">2</span>;</span><br><span class="line">        <span class="type">int</span> left_node=<span class="number">2</span>*node;</span><br><span class="line">        <span class="type">int</span> right_ndoe=left_node+<span class="number">1</span>;</span><br><span class="line">        buildTree(left_node,start,mid);</span><br><span class="line">        buildTree(right_ndoe,mid+<span class="number">1</span>,end);</span><br><span class="line">        tree[node]=tree[left_node]+tree[right_ndoe];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(<span class="type">int</span> index, <span class="type">int</span> val)</span> &#123;</span><br><span class="line">        updateTree(index,val,<span class="number">1</span>,<span class="number">0</span>,n-<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateTree</span><span class="params">(<span class="type">int</span> index,<span class="type">int</span> val,<span class="type">int</span> node,<span class="type">int</span> start,<span class="type">int</span> end)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(start==end)&#123;</span><br><span class="line">            myNums[index]=val;</span><br><span class="line">            tree[node]=val;</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> mid=(start+end)/<span class="number">2</span>;</span><br><span class="line">        <span class="type">int</span> left_node=<span class="number">2</span>*node;</span><br><span class="line">        <span class="type">int</span> right_ndoe=left_node+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(index&lt;=mid &amp;&amp; index&gt;=start)&#123;</span><br><span class="line">            updateTree(index,val,left_node,start,mid);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            updateTree(index,val,right_ndoe,mid+<span class="number">1</span>,end);</span><br><span class="line">        &#125;</span><br><span class="line">        tree[node]=tree[left_node]+tree[right_ndoe];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">sumRange</span><span class="params">(<span class="type">int</span> left, <span class="type">int</span> right)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> sumTree(left,right,<span class="number">1</span>,<span class="number">0</span>,n-<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">sumTree</span><span class="params">(<span class="type">int</span> left,<span class="type">int</span> right,<span class="type">int</span> node,<span class="type">int</span> L,<span class="type">int</span> R)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(left&gt;R || right&lt;L) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(L==R || (L&gt;=left &amp;&amp; R&lt;=right)) <span class="keyword">return</span> tree[node]; </span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> mid=(L+R)/<span class="number">2</span>;</span><br><span class="line">        <span class="type">int</span> left_node=node*<span class="number">2</span>;</span><br><span class="line">        <span class="type">int</span> right_ndoe=left_node+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> sumTree(left,right,left_node,L,mid)+sumTree(left,right,right_ndoe,mid+<span class="number">1</span>,R);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>
<p>非递归（从下往上），tree中从i&gt;=n开始赋值数组中的元素，然后一层一层往上加，所需空间为，n+O(上层需要的空间)<br>
非递归线段树的特点是：所有非叶节点都有两个子节点</p>
<p>上层所需空间为：<br>
$$<br>
\begin{align}<br>
&amp;=\frac{n}{2}+\frac{n}{4}+\cdots+1\<br>
&amp;=n*(\frac{1}{2^1}+\frac{1}{2^2}+\frac{1}{2^3}+\cdots+\frac{1}{2^\infin})\<br>
&amp;&lt;=n*1<br>
\end{align}<br>
$$</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*非递归: 所需空间O（2n）</span></span><br><span class="line"><span class="comment">先找叶节点，原数组中index大于等于n的都是叶节点</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NumArray</span>.</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="type">int</span>[] tree;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">NumArray</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        n=nums.length; </span><br><span class="line">        tree=<span class="keyword">new</span> <span class="title class_">int</span>[n&lt;&lt;<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=n,j=<span class="number">0</span>;j&lt;n;i++,j++) tree[i]=nums[j];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=n-<span class="number">1</span>;i&gt;<span class="number">0</span>;i--) tree[i]=tree[i*<span class="number">2</span>]+tree[i*<span class="number">2</span>+<span class="number">1</span>];<span class="comment">//一定会被填满吗</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(<span class="type">int</span> index, <span class="type">int</span> val)</span> &#123;</span><br><span class="line">        index=index+n;</span><br><span class="line">        tree[index]=val;</span><br><span class="line">        index/=<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">while</span>(index&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            tree[index]=tree[index*<span class="number">2</span>]+tree[index*<span class="number">2</span>+<span class="number">1</span>];</span><br><span class="line">            index/=<span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">sumRange</span><span class="params">(<span class="type">int</span> left, <span class="type">int</span> right)</span> &#123;</span><br><span class="line">        left+=n;</span><br><span class="line">        right+=n;</span><br><span class="line">        <span class="type">int</span> sum=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(left&lt;=right)&#123;</span><br><span class="line">            <span class="keyword">if</span>(left%<span class="number">2</span>==<span class="number">1</span>)&#123;</span><br><span class="line">                sum+=tree[left];</span><br><span class="line">                left++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(right%<span class="number">2</span>==<span class="number">0</span>)&#123;</span><br><span class="line">                sum+=tree[right];</span><br><span class="line">                right--;</span><br><span class="line">            &#125;</span><br><span class="line">            left/=<span class="number">2</span>;</span><br><span class="line">            right/=<span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="%E7%AE%97%E6%B3%95%E5%B0%8F%E8%AE%A1.assets/SouthEast.png" alt=""></p>
<h1>扫描线</h1>
<h1>Manacher算法（马拉车算法）</h1>
<p>即中心扩展法的优化。用于处理回文字符串的相关问题，时间复杂度为O(n)</p>
<p>数组dp，dp[i]表示以i为中心的最长回文子串的长度。</p>
<p>right代表以center为中心的最长回文子串的右边界。</p>
<p>**重点1：**是计算dp[i]。</p>
<ol>
<li>
<p>i&lt;right</p>
<p>dp[i]=min(dp[2*center-i],right-i+1)</p>
<p>然后再向外扩展，while(s.charAt(i-dp[i])==s.charAt(i+dp[i]))</p>
<p>为什么这里还可以向外扩展</p>
</li>
<li>
<p>其他</p>
<p>直接while(s.charAt(i-dp[i])==s.charAt(i+dp[i]))</p>
</li>
</ol>
<p><strong>重点2：</strong> 如何处理奇字符串和偶字符串</p>
<p>答：在所有字符串中插入一个该字符串不会出现的字符，将字符串长度变为奇数。</p>
<h1>KMP算法</h1>
<p>一句话来说，这个算法是用来解决在一个字符串s中快速（O(n+m)）匹配子串pattern。</p>
<p>朴素的解法是：枚举ss中的每个字符为出发点，从ss的出发点和pattern的首位进行匹配。时间复杂度为O(n*m)</p>
<p>而KMP算法能在非完全匹配的过程中提取到有效信息进行复用，以减少重复匹配的消耗。</p>
<p>有两个点：</p>
<ul>
<li>一个字符串有相同的前缀和后缀，例：abc****abc</li>
<li>未匹配成功时，需要找到下一个开始匹配的点。下一个开始匹配的点在哪与原串无关，与匹配串有关，所以建立一个长度为pattern.length()大小的next数组，next[i]=<font color="red">第i位前面i-1位组成的子串的最长公共前后缀长度</font>。意义是当第i位不匹配时，模式串要回退的位置。</li>
<li a,ab="">一个子串的前缀代表不包含最后一个字符的所有前缀，例如aba的前缀是</li>
<li ba,a="">一个子串的后缀代表不包含第一个字符的所有前缀，例如aba的后缀是</li>
</ul>
<p>时间复杂度：O(n+m)</p>
<p>还是有点不太清楚。</p>
<p><font color="red">在求next数组时，j代表的什么含义呢？j怎样才会前进？怎样才会后退？后退到什么地步即可？</font></p>
<p>这里：</p>
<ol>
<li>
<p>i所指的是当前后缀的最后一个字符，j指的是前缀的最后一个字符，所以才有<code>if(pattern.charAt(i)==pattern(j)next[++i]=++j;</code></p>
</li>
<li>
<p>如果i，j所指的字符不相等，则看看[0,j-1]子串有没有可以利用的有效信息，对应<code>j=next[j]</code>, 当然j==0时要先排除掉（说明前面没有有效信息，i需要++了）。</p>
</li>
</ol>
<p>next数组的求法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> i=<span class="number">1</span>,j=<span class="number">0</span>;</span><br><span class="line"><span class="comment">//next[i]表示前i-1个子串的最长公共前后缀长度</span></span><br><span class="line"><span class="keyword">while</span>(i&lt;m-<span class="number">1</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(pattern.charAt(i)==pattern.charAt(j)) next[++i]=++j;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(j==<span class="number">0</span>) next[++i]=j;</span><br><span class="line">    <span class="keyword">else</span> j=next[j];         </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>j指向当前最长公共前后缀之后的第一个字符；</p>
<p>如果这个字符与i指向的字符一致，j++；</p>
<p>不一致，则回退到j=next[j]</p>
<h1>其他</h1>
<ol>
<li>字符串的迭代：</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">char</span> c:string.toCharArray())<span class="comment">//更快</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;string.length();i++)</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>快慢指针可以更快找到链表中点。</li>
</ol>
<h1>序列化</h1>
<p>判断两棵树是否结构相同且各节点对应值是否相同可以用序列化</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://xyat98.github.io/2024/01/01/2024-1-1-%E9%9A%8F%E7%AC%94/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/IMG_9443.JPG">
      <meta itemprop="name" content="y-n">
      <meta itemprop="description" content="Faith is a substance of things hoped for, the evidence of things not seen.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Liu">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/01/01/2024-1-1-%E9%9A%8F%E7%AC%94/" class="post-title-link" itemprop="url">2024_1_1_随笔</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-01-01 07:07:41" itemprop="dateCreated datePublished" datetime="2024-01-01T07:07:41+08:00">2024-01-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-01-13 20:24:05" itemprop="dateModified" datetime="2024-01-13T20:24:05+08:00">2024-01-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9A%8F%E7%AC%94/" itemprop="url" rel="index"><span itemprop="name">随笔</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>鼻子有些难受所以没办法继续睡了，躺着鼻子会更难受。</p>
<p>脑子里的思绪乱糟糟的，一会想这一会想那。</p>
<p>现在在看渐构的课程视频，有一种油然而生的悲哀感。</p>
<p>学到了如何学习的能力又如何呢。尽管我现在很需要这个课程所讲的东西，但我顶讨厌于博士将学习效率的重要性提得如此之高。可能是我过于悲观，我认为的全世界所有人学习效率的提升是给了资本家进一步压榨人民的工具。我就怕卷来卷去，普通人民还是没有办法单纯地去享受生命的过程，仍然一生停留在解决生存问题的沼泽中。</p>
<p>不过，往好的方向想，生产力也可能会因此大幅提高，或许有天能真的实现社会主义呢</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://xyat98.github.io/2023/12/31/new-year-resolution/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/IMG_9443.JPG">
      <meta itemprop="name" content="y-n">
      <meta itemprop="description" content="Faith is a substance of things hoped for, the evidence of things not seen.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Liu">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/12/31/new-year-resolution/" class="post-title-link" itemprop="url">new_year_resolution</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-12-31 22:46:17" itemprop="dateCreated datePublished" datetime="2023-12-31T22:46:17+08:00">2023-12-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-01-13 20:24:05" itemprop="dateModified" datetime="2024-01-13T20:24:05+08:00">2024-01-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/plan/" itemprop="url" rel="index"><span itemprop="name">plan</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>找到目标的几个方向</h1>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/kOBiCmmtFKI9EE9KP5fNmw">https://mp.weixin.qq.com/s/kOBiCmmtFKI9EE9KP5fNmw</a></p>
<h2 id="通过自己擅长的事情寻找未来目标的线索">通过自己擅长的事情寻找未来目标的线索</h2>
<p>Accomplishment成就、Experience经历、Relationship关系、Object物品</p>
<p>Your best accomplishment will impact the world</p>
<p>Your best experience comes from pursuing your craft</p>
<p>The best relationships always lead to community</p>
<p>The best objects tell a story</p>
<p>1.Time speeds up when 刷到一个很妙的题/非常投入地学知识/断断续续地弹成一首歌/看书的时候产生共鸣（或者看爽文 爽文质量很好 又能满足我情感上的某些缺口/匮乏？)/ or slows down when 听了一个很无聊的课/开了一个很无聊的会/大概就是做一个很无聊的事</p>
<p>2.The best job ever had was 没啥感受， 目前的就还挺喜欢的 and the reason liked it so much was because 因为每天都有学到新的东西。</p>
<p>（补充一点，我觉得还不够的是，学到的新东西是零零散散的分布在我脑海中，而不是在我的知识体系里加上了一根树枝或一片树叶。或许是现在没有知识体系)</p>
<p>3.Every time I see  直击心灵的美景/有趣的信息（传达了人性美的东西) I smile.</p>
<p>4.If I had a free hour today, I’d spend it 这个问题没有办法回答，我现在还没有对任何一件事物产生这么强烈的兴趣.</p>
<p>5.If I won $163 million in the lottery, I’d turn 我妈 我姐 into a millionaire too.</p>
<p>6.This might sound like I’m bragging, but three of my greatest accomplishments are: .</p>
<p>7.When I scroll through my camera roll on my phone, always get inspired when I see .</p>
<h2 id="把过去重要的事物划分为四个类别">把过去重要的事物划分为四个类别</h2>
<h2 id="建立自己的最佳时刻清单">建立自己的最佳时刻清单</h2>
<h1>目标的三种类型</h1>
<h2 id="简单目标的5个参考">简单目标的5个参考</h2>
<h2 id="中型目标的5个参考">中型目标的5个参考</h2>
<h2 id="确保目标的5个参考">确保目标的5个参考</h2>
<h2 id="倒金字塔，不断聚焦">倒金字塔，不断聚焦</h2>
<h1>持续获取动力的方式</h1>
<h2 id="找到自己的燃料">找到自己的燃料</h2>
<h2 id="持续是会传染的，会影响到其他目标的推动">持续是会传染的，会影响到其他目标的推动</h2>
<h2 id="将所做的事情变成创造">将所做的事情变成创造</h2>
<h2 id="找到自己的部落">找到自己的部落</h2>
<h2 id="让进展可视化">让进展可视化</h2>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://xyat98.github.io/2023/12/27/vim-usage/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/IMG_9443.JPG">
      <meta itemprop="name" content="y-n">
      <meta itemprop="description" content="Faith is a substance of things hoped for, the evidence of things not seen.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Liu">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/12/27/vim-usage/" class="post-title-link" itemprop="url">vim_usage</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-12-27 07:35:59" itemprop="dateCreated datePublished" datetime="2023-12-27T07:35:59+08:00">2023-12-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-01-13 20:24:05" itemprop="dateModified" datetime="2024-01-13T20:24:05+08:00">2024-01-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Develop/" itemprop="url" rel="index"><span itemprop="name">Develop</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>搜索匹配替换</h1>
<ul>
<li>需要对全文进行搜索匹配的话： 在normal模式下输入 :%s/old/new</li>
<li>需要对选中的内容进行替换的话：
<ul>
<li>在normal模式下输入v进入可视模式（V是进入行可视模式-逐行选择)，</li>
<li>然后输入: 进入命令模式， 然后底部会显示  <code>:'&lt;,'&gt;</code>  ， 表示对选中的区域执行命令。</li>
<li>再输入s/old/new</li>
</ul>
</li>
<li>搜索匹配的命令中, /是分割符， \是转义符</li>
<li>如果需要从匹配到的字符中提取某一部分到替换部分的话， 将需要的文字用()括起来</li>
<li>\1是用()括起来的文字</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="y-n"
      src="/images/IMG_9443.JPG">
  <p class="site-author-name" itemprop="name">y-n</p>
  <div class="site-description" itemprop="description">Faith is a substance of things hoped for, the evidence of things not seen.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">16</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">y-n</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
